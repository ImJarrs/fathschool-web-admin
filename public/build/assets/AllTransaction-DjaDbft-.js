import{_ as R}from"./AppLayout-D06oZWsy.js";import{T as z}from"./ToolTip-DNh-kznG.js";import{P as G}from"./Pagination-DHbdUHOs.js";import{B as H}from"./BarChart-MqYACVTE.js";import{_ as J,N as K,r as l,c as f,o as u,w as n,a as r,b as t,e as b,h as p,i as _,t as s,l as Q,n as w,F as W,j as X,m as g,p as h,k as x,f as I}from"./app-B4siR4nP.js";import{_ as Z}from"./Modal-DEp1tEtC.js";import{r as $}from"./EyeIcon-BOU59fVo.js";import{r as tt}from"./MagnifyingGlassIcon-D3UcIlUc.js";import{r as et}from"./PencilSquareIcon-D3Yw7vGl.js";import{r as at}from"./LinkIcon-BdxE77ja.js";import{r as st}from"./TrashIcon-Y0IuqUC6.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";import"./auto-CkVXdHX2.js";const ot={components:{AppLayout:R,ToolTip:z,TrashIcon:st,LinkIcon:at,PencilSquareIcon:et,Pagination:G,MagnifyingGlassIcon:tt,ExportModal:Z,NothingFound:K,EyeIcon:$,BarChart:H},props:{filter_data:Object,transactions:Object,total_amount:Number,total_due_amount:Number,this_year_labels:Array,this_year_values:Array},data(){return{visible:!1,update:!1,item:"",customDateFormat:"DD-MM-YYYY",date2:[this.filter_data.start_date?x(this.filter_data.start_date):null,this.filter_data.end_date?x(this.filter_data.end_date):null],filter:I.useForm({keyword:this.filter_data.keyword??"",status:this.filter_data.status??"",start_date:this.filter_data.start_date??"",end_date:this.filter_data.end_date??"",type:this.filter_data.type??"",over_due:this.filter_data.over_due??""}),tab:this.filter_data.type??"all",tab2:this.filter_data.status??"all",tab3:this.filter_data.over_due??"all",export_data:I.useForm({type:"xlsx",month:"this_month"}),loading:!1}},watch:{date2:{deep:!0,handler(e,o){if(e!=null)if(this.date2[0]!=null&&this.date2[1]!=null){let d=x(this.date2[0]).format("YYYY-MM-DD"),c=x(this.date2[1]).format("YYYY-MM-DD");this.filter.start_date=d,this.filter.end_date=c}else this.filter.start_date="",this.filter.end_date="";else this.filter.start_date="",this.filter.end_date=""}}},methods:{destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("transaction.destroy",e));else return!1},filterData(){this.filter.get(this.route("transaction.index"),{preserveScroll:!0})},showModal(){this.$refs.modal.showModal()},showExportModal(){this.visible=!0},exportSubmit(){this.loading=!0,axios({url:this.route("report.transaction.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{let o=this.export_data.type;var d=window.URL.createObjectURL(new Blob([e.data])),c=document.createElement("a");c.href=d,c.setAttribute("download","transactions-report."+o),document.body.appendChild(c),c.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})},setTabValue(e){let o=e.filter_column_data??"",d=e.value??"";this.filter[o]=d}}},rt={class:"pb-12"},lt={class:"flex justify-between items-center gap-4"},it={key:0,class:"bg-white mb-4 dark:bg-gray-800 rounded-lg"},dt={class:"mb-0 text-black/[0.85] dark:text-gray-400 md:flex items-center justify-between font-semibold text-base px-6 py-4"},nt={class:"font-bold text-gray-500"},ut={class:"text-black dark:text-gray-400"},_t={class:"p-6"},ct={class:"mb-4"},pt={class:"flex items-center col-span-2"},mt={class:"relative w-full"},ft={type:"submit",class:"absolute top-1 rtl:right-auto rtl:left-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},bt={class:"sr-only"},gt={class:"col-span-2"},ht={class:"2xl:col-span-4 flex flex-col lg:flex-row sm:gap-6 gap-1.5 lg:items-center"},yt={class:"sm:flex-row flex flex-col sm:gap-4 gap-1.5 w-full"},xt={class:"col-span-2 bg-white dark:bg-gray-800 dark:text-gray-600 rounded-lg",id:"transactionTable"},kt={class:"py-4 px-5"},vt={class:"py-4 px-5"},wt={class:"py-4 px-5"},Tt={class:"py-4 px-5",width:"30%"},Dt={class:"py-4 px-5"},It={class:"py-4 px-5 flex justify-end"},Mt={class:"py-4 px-5 text-sm text-gray-900 whitespace-nowrap dark:text-gray-400"},St={class:"mb-0 font-medium"},At={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Lt={class:"text-base flex gap-2 font-semibold"},Vt={class:"text-sm"},Ct={class:"text-sm font-medium"},Et={class:"py-4 px-5 text-sm text-gray-900 whitespace-nowrap dark:text-gray-400"},Pt={class:"font-medium"},Yt={class:"font-semibold"},Ft={class:"py-4 px-5 text-gray-900 dark:text-gray-400"},Bt={class:"text-sm font-medium"},Nt={class:"flex items-center gap-3 mb-1 whitespace-nowrap"},Ut=["href"],jt={class:"mb-0 whitespace-nowrap"},Ot={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},qt={class:"text-base font-semibold inline-flex"},Rt={class:"py-5 px-5"},zt={class:"flex justify-end items-center gap-2"},Gt=["href"],Ht=["onClick","id"],Jt={class:"flex justify-center"},Kt={class:"text-left"},Qt={class:"mb-2"},Wt={class:"text-left"},Xt={for:"this_month",class:"w-full py-3 pb-1 text-sm font-medium text-gray-900 dark:text-gray-300"},Zt={class:"md:flex gap-1 items-center"},$t={class:"w-full mt-1 md:mt-0 flex items-center pl-4 border border-gray-200 rounded dark:border-gray-700"},te={for:"this_month",class:"w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},ee={class:"w-full mt-1 md:mt-0 flex items-center pl-4 border border-gray-200 rounded dark:border-gray-700"},ae={for:"last_month",class:"w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},se={class:"w-full mt-1 md:mt-0 flex items-center pl-4 border border-gray-200 rounded dark:border-gray-700"},oe={for:"last_six_month",class:"w-full py-3 ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},re={class:""},le={class:"text-left"},ie={for:"excel",class:"w-full text-left py-3 pb-1 text-sm font-medium text-gray-900 dark:text-gray-300"},de={class:"md:flex gap-6 items-center"},ne={class:"w-full mt-1 md:mt-0 rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},ue={for:"pdf",class:"w-full mt-1 md:mt-0 cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function _e(e,o,d,c,i,m){const M=l("BreadcrumbLink"),S=l("Breadcrumb"),y=l("global-button"),A=l("page-header"),L=l("bar-chart"),V=l("global-input"),C=l("MagnifyingGlassIcon"),E=l("a-range-picker"),k=l("tab-filter"),P=l("LinkIcon"),T=l("Link"),Y=l("EyeIcon"),v=l("tool-tip"),F=l("pencil-square-icon"),B=l("TrashIcon"),N=l("NothingFound"),U=l("global-table"),j=l("pagination"),D=l("global-label"),O=l("export-modal"),q=l("AppLayout");return u(),f(q,{title:e.__("Transaction List")},{default:n(()=>[r(S,null,{default:n(()=>[r(M,{title:e.__("All Transaction")},null,8,["title"])]),_:1}),t("div",rt,[r(A,null,{content:n(()=>[t("div",lt,[e.can("transaction.create")?(u(),f(y,{key:0,loading:!1,url:e.route("transaction.create"),id:"addNewTransaction",type:"link",theme:"primary"},{default:n(()=>[_(s(e.__("Add Transaction")),1)]),_:1},8,["url"])):p("",!0)])]),default:n(()=>[_(s(e.__("All Transaction"))+" ",1)]),_:1}),e.$page.props.auth.role=="Parent"?(u(),b("div",it,[t("h2",dt,[t("div",null,s(e.__("This Year Transaction")),1),t("div",nt,[_(s(e.__("Total Due Amount"))+": ",1),t("span",ut,s(e.$page.props.default_currency_symbol??"")+s(d.total_due_amount),1)])]),o[10]||(o[10]=t("hr",{class:"dark:border-gray-600"},null,-1)),t("div",_t,[r(L,{labels:d.this_year_labels,data:d.this_year_values,barPercentage:.1},null,8,["labels","data"])])])):p("",!0),t("div",ct,[t("form",{class:"items-center grid grid-cols-1 2xl:grid-cols-8 2xl:gap-x-4 sm:gap-y-6 gap-y-1.5",onSubmit:o[2]||(o[2]=Q(a=>m.filterData(),["prevent"]))},[t("div",pt,[t("div",mt,[r(V,{modelValue:i.filter.keyword,"onUpdate:modelValue":o[0]||(o[0]=a=>i.filter.keyword=a),type:"text",class:"mt-1 block w-full placeholder:text-xs sm:placeholder:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Insert Title, Expense/Income or Type")},null,8,["modelValue","placeholder"]),t("button",ft,[r(C,{class:"w-5 h-5"}),t("span",bt,s(e.__("Search")),1)])])]),t("div",gt,[r(E,{class:w([e.$page.props.errors.date?"border-custom":"","custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400"]),name:"date","disabled-date":e.disabledDate,"disabled-time":e.disabledRangeTime,value:i.date2,"onUpdate:value":o[1]||(o[1]=a=>i.date2=a),format:i.customDateFormat},null,8,["class","disabled-date","disabled-time","value","format"])]),t("div",ht,[t("div",yt,[e.$page.props.auth.role!="Parent"&&e.$page.props.auth.role!="Student"?(u(),f(k,{key:0,onSetTabData:m.setTabValue,filterData:d.filter_data?d.filter_data.type:"",filter_column:"type",tab_data:[{title:"All",id:"all3",value:"all"},{title:"Income",id:"income",value:"income"},{title:"Expense",id:"expense",value:"expense"}]},null,8,["onSetTabData","filterData"])):p("",!0),r(k,{onSetTabData:m.setTabValue,filterData:d.filter_data?d.filter_data.status:"",filter_column:"status",tab_data:[{title:"All",id:"all2",value:"all"},{title:"Paid",id:"paid",value:"paid"},{title:"Unpaid",id:"unpaid",value:"unpaid"}]},null,8,["onSetTabData","filterData"]),r(k,{onSetTabData:m.setTabValue,filterData:d.filter_data?d.filter_data.over_due:"",filter_column:"over_due",tab_data:[{title:"All",id:"all",value:"all"},{title:"Over Due",id:"over-due",value:"over-due"}]},null,8,["onSetTabData","filterData"])]),r(y,{loading:i.filter.processing,type:"submit",class:"text-white inline-flex whitespace-nowrap"},{default:n(()=>[_(s(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",xt,[r(U,null,{head:n(()=>[t("th",kt,s(e.__("Invoice")),1),t("th",vt,s(e.__("Total Amount")),1),t("th",wt,s(e.__("Paid Amount")),1),t("th",Tt,s(e.__("Info")),1),t("th",Dt,s(e.__("Status")),1),t("th",It,s(e.__("Action")),1)]),body:n(()=>[d.transactions.data.length>0?(u(!0),b(W,{key:0},X(d.transactions.data,a=>(u(),b("tr",{key:a.id,class:"border-b dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"},[t("td",Mt,[t("div",null,s(e.__("Transaction"))+": #"+s(a.id),1),t("p",St,s(a.type?a.type.name:""),1)]),t("td",At,[t("div",Lt,[t("span",Vt,s(this.$page.props.default_currency_symbol+" "+a.amount),1),t("span",{class:w(["capitalize text-xs font-semibold mr-2 px-2.5 py-0.5 rounded",a.type.type==="income"?"bg-blue-100 text-blue-800 dark:bg-gray-700 dark:text-gray-400":"bg-red-100 text-red-800 dark:bg-red-500 dark:opacity-60 dark:text-red-100"])},s(a.type.type),3)]),t("div",Ct,s(e.__("Due Date"))+": "+s(a.due_date_format),1)]),t("td",Et,[t("div",Pt,s(this.$page.props.default_currency_symbol+" "+a.paid_amount),1),t("div",Yt,s(a.method),1)]),t("td",Ft,[t("div",Bt,[t("p",Nt,[a.document?(u(),b("a",{key:0,href:a.document,download:"",target:"_blank",class:"text-sm inline-flex gap-2 items-center text-blue-500 hover:text-blue-400 cursor-pointer"},[r(P,{class:"w-6 h-6"}),_(" "+s(e.__("Attached File")),1)],8,Ut)):p("",!0)]),t("p",jt,s(e.__("Date of Issue"))+": "+s(e.formatTime(a.date_time)),1)])]),t("td",Ot,[t("div",qt,[t("span",{class:w(["capitalize text-xs font-semibold px-2.5 py-0.5 rounded",a.status=="paid"?"bg-green-400 text-white dark:opacity-60":"bg-blue-100 text-blue-800 dark:opacity-60"])},s(a.status),3)])]),t("td",Rt,[t("div",zt,[a.status=="unpaid"&&e.can("transaction.update")?(u(),f(T,{key:0,method:"POST",href:e.route("transaction.mark.as.paid",a.id),class:"whitespace-nowrap text-blue-500 hover:text-blue-400"},{default:n(()=>[_(s(e.__("Mark as Paid")),1)]),_:2},1032,["href"])):p("",!0),t("a",{href:e.route("transaction.details",a.transaction_no),target:"_blank",class:"group relative"},[r(Y,{class:"text-purple-500 w-6 h-6 hover:text-purple-400"}),r(v,{text:"View Details"})],8,Gt),e.can("transaction.edit")?(u(),f(T,{key:1,"preserve-scroll":"",href:e.route("transaction.edit",a.id),type:"button",class:"group relative",id:"testEditTransaction"+a.id},{default:n(()=>[r(F,{class:"text-blue-500 w-6 h-6 hover:text-blue-400"}),r(v,{text:"Edit"})]),_:2},1032,["href","id"])):p("",!0),e.can("transaction.destroy")?(u(),b("button",{key:2,type:"button",onClick:ce=>m.destroy(a.id),class:"group relative",id:"testDeleteTransaction"+a.id},[r(B,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),r(v,{text:e.__("Delete")},null,8,["text"])],8,Ht)):p("",!0)])])]))),128)):(u(),f(N,{key:1,asShow:"tr"}))]),_:1}),t("div",Jt,[r(j,{class:"mt-6 mb-6",links:d.transactions.links},null,8,["links"])])])]),r(O,{show:i.visible,onClose:e.closeModal},{title:n(()=>[t("div",Kt,s(e.__("Export Data")),1)]),content:n(()=>[t("div",Qt,[t("div",Wt,[t("label",Xt,s(e.__("Choose Time Period")),1)]),t("div",Zt,[t("div",$t,[g(t("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>i.export_data.month=a),id:"this_month",type:"radio",value:"this_month",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[h,i.export_data.month]]),t("label",te,s(e.__("This Month")),1)]),t("div",ee,[g(t("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>i.export_data.month=a),id:"last_month",type:"radio",value:"last_month",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[h,i.export_data.month]]),t("label",ae,s(e.__("Last Month")),1)]),t("div",se,[g(t("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>i.export_data.month=a),id:"last_six_month",type:"radio",value:"last_six_month",name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[h,i.export_data.month]]),t("label",oe,s(e.__("Last Six Month")),1)])])]),t("div",re,[t("div",le,[t("label",ie,s(e.__("Choose Data Format")),1)]),t("div",de,[t("label",ne,[g(t("input",{value:"xlsx",id:"excel","onUpdate:modelValue":o[6]||(o[6]=a=>i.export_data.type=a),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-gray-400 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[h,i.export_data.type]]),r(D,{for:"excel",class:"py-2 ml-2 mt-1 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-300",value:"Excel",required:!1})]),t("label",ue,[g(t("input",{value:"pdf",id:"pdf","onUpdate:modelValue":o[7]||(o[7]=a=>i.export_data.type=a),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[h,i.export_data.type]]),r(D,{for:"pdf",class:"py-2 ml-2 mt-1 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-300",value:"PDF",required:!1})])])])]),footer:n(()=>[r(y,{onClick:o[8]||(o[8]=a=>m.exportSubmit()),loading:i.loading,type:"button",class:"mr-2",id:"exportTransaction"},{default:n(()=>[_(s(e.__("Export")),1)]),_:1},8,["loading"]),r(y,{loading:!1,onClick:o[9]||(o[9]=a=>i.visible=!1),type:"button",class:"mr-2",theme:"outline-danger"},{default:n(()=>[_(s(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1},8,["title"])}const Ee=J(ot,[["render",_e],["__scopeId","data-v-790652b4"]]);export{Ee as default};
