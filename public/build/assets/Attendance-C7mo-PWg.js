import{_ as N}from"./AppLayout-pRkTteQX.js";import{_ as V,N as U,f as h,r as i,e as p,o as d,a as l,w as n,b as t,h as R,t as s,l as T,i as u,c as O,F as x,j as b,m as w,p as k}from"./app-R3TKzMFz.js";import{s as P}from"./multiselect-S7NpFuS0.js";import{_ as q}from"./Modal-BLSUD_Cv.js";/* empty css                */import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./XMarkIcon-8_3jvOSV.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";const A={props:{attendances:Object,filter_data:Object,subjects:Array},components:{AppLayout:N,Multiselect:P,useForm:h.useForm,ExportModal:q,NothingFound:U},data(){return{subject_data:[],filter:h.useForm({keyword:this.filter_data.keyword??"",status:this.filter_data.status??"",subject_id:this.filter_data.subject_id??""}),loading:!1,visible:!1,exportData:{type:"xlsx",subject:""}}},methods:{getSubject(){var o=[];this.subjects.forEach(e=>{o.push({value:e.id,label:e.name})}),this.subject_data=o},filterData(){this.filter.get(this.route("my.attendance"))},showExportModal(o){this.exportData.subject=o,this.visible=!0},exportSubmit(o){this.loading=!0,axios({url:this.route("attendance.export"),method:"POST",data:this.exportData,responseType:"blob"}).then(e=>{let m=this.exportData.type;var y=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=y,a.setAttribute("download","attendance-report."+m),document.body.appendChild(a),a.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})}},mounted(){this.getSubject()}},H={class:"dark:text-gray-400"},z={key:0,class:"ml-0.5 my-5"},G={class:"col-span-2"},I={class:"col-span-2"},J={class:"w-full"},K={class:"sm:px-6 lg:px-8"},Q={class:"mt-8 flex flex-col"},W={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},X={class:"inline-block min-w-full py-2 align-middle"},Y={class:"overflow-hidden w-full"},Z={class:"min-w-full bg-white dark:bg-gray-800 rounded-lg"},$={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400 sm:pl-6"},tt={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},et={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},ot={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},st={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},at={scope:"col",class:"py-4 px-5 whitespace-nowrap text-left rtl:text-right text-sm font-semibold text-gray-900 dark:text-gray-400"},rt={class:"border-t border-gray-200"},lt={colspan:"5",scope:"colgroup",class:"bg-gray-50 dark:bg-gray-700 px-5 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400 sm:px-6"},it={colspan:"1",scope:"colgroup",class:"bg-gray-50 dark:bg-gray-700 px-5 py-2 text-right text-sm font-semibold text-gray-900 dark:text-gray-400 sm:px-6"},nt={class:"whitespace-nowrap py-4 px-5 text-sm font-medium text-gray-900 dark:text-gray-400"},dt={class:"whitespace-nowrap px-5 py-4 text-sm text-gray-500"},pt={class:"whitespace-nowrap px-5 py-4 text-sm text-gray-500"},ct={class:"whitespace-nowrap px-5 py-4 text-sm text-gray-500"},mt={colspan:"2",class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ut={key:1},gt={class:"flex gap-6"},_t={class:"w-full rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},xt={for:"pdf",class:"w-full cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function yt(o,e,m,y,a,_){const v=i("Head"),j=i("BreadcrumbLink"),D=i("Breadcrumb"),C=i("page-header"),L=i("Multiselect"),g=i("global-button"),E=i("NothingFound"),f=i("global-label"),S=i("export-modal"),F=i("AppLayout");return d(),p(x,null,[l(v,{title:o.__("Attendance List")},null,8,["title"]),l(F,null,{default:n(()=>[l(D,null,{default:n(()=>[l(j,{title:o.__("Attendance List")},null,8,["title"])]),_:1}),t("div",null,[l(C,null,{default:n(()=>[t("div",H,s(o.__("Attendance List")),1)]),_:1}),m.attendances.length>0?(d(),p("div",z,[t("form",{class:"grid grid-cols-1 md:grid-cols-7 gap-6 items-center",onSubmit:e[1]||(e[1]=T(r=>_.filterData(),["prevent"]))},[t("div",G,[l(L,{modelValue:a.filter.subject_id,"onUpdate:modelValue":e[0]||(e[0]=r=>a.filter.subject_id=r),"close-on-select":!0,searchable:!0,"create-option":!1,placeholder:o.__("Select Subject"),options:a.subject_data,autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",I,[l(g,{loading:a.filter.processing,type:"submit",theme:"primary"},{default:n(()=>[u(s(o.__("Search")),1)]),_:1},8,["loading"])])],32)])):R("",!0),t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("table",Z,[t("thead",null,[t("tr",null,[t("th",$,s(o.__("Date")),1),t("th",tt,s(o.__("Teacher")),1),t("th",et,s(o.__("Total Class")),1),t("th",ot,s(o.__("Present Class")),1),t("th",st,s(o.__("Present Rate")),1),t("th",at,s(o.__("Export Sheet")),1)])]),m.attendances.length>0?(d(!0),p(x,{key:0},b(m.attendances,(r,B)=>(d(),p("tbody",{class:"bg-white dark:bg-gray-800",key:B},[t("tr",rt,[t("th",lt,s(r[0].subject.name),1),t("th",it,[l(g,{onClick:c=>_.showExportModal(r[0].subject),loading:!1,type:"button",theme:"primary"},{default:n(()=>e[6]||(e[6]=[u(" Export ")])),_:2,__:[6]},1032,["onClick"])])]),r&&r.length?(d(!0),p(x,{key:0},b(r,(c,M)=>(d(),p("tr",{class:"border-t border-gray-300",key:M},[t("td",nt,s(c.date_time),1),t("td",dt,s(c.teacher.name),1),t("td",pt,s(c.total_class),1),t("td",ct,s(c.present_days),1),t("td",mt,s(c.present_percentage)+" %",1)]))),128)):(d(),p("div",ut,e[7]||(e[7]=[t("tr",null,[t("td",{colspan:"10",class:"text-center p-4"},"No Attendance Found")],-1)])))]))),128)):(d(),O(E,{key:1,asShow:"tr"}))])])])])])])])]),l(S,{show:a.visible,onClose:o.closeModal},{title:n(()=>[u(s(o.__("Export Data")),1)]),content:n(()=>[t("div",gt,[t("div",_t,[w(t("input",{value:"xlsx",id:"excel","onUpdate:modelValue":e[2]||(e[2]=r=>a.exportData.type=r),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-gray-400 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[k,a.exportData.type]]),l(f,{for:"excel",class:"py-3 ml-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-400",value:"Excel",required:!1})]),t("label",xt,[w(t("input",{value:"pdf",id:"pdf","onUpdate:modelValue":e[3]||(e[3]=r=>a.exportData.type=r),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[k,a.exportData.type]]),l(f,{for:"pdf",class:"py-3 ml-2 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-400",value:"PDF",required:!1})])])]),footer:n(()=>[l(g,{onClick:e[4]||(e[4]=r=>_.exportSubmit()),loading:a.loading,type:"button",theme:"primary",class:"mr-2"},{default:n(()=>[u(s(o.__("Export")),1)]),_:1},8,["loading"]),l(g,{loading:!1,onClick:e[5]||(e[5]=r=>a.visible=!1),type:"button",theme:"outline-danger"},{default:n(()=>[u(s(o.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1})],64)}const Bt=V(A,[["render",yt]]);export{Bt as default};
