import{_ as B}from"./AppLayout-D06oZWsy.js";import{P as F}from"./Pagination-DHbdUHOs.js";import{_ as T,r as o,e as n,o as d,a as i,w as _,b as e,i as h,t as a,l as O,F as m,j as y,h as f,m as z,n as P,H as U,k as b}from"./app-B4siR4nP.js";import{s as H}from"./multiselect-BtWcUH1S.js";/* empty css                */import{r as X}from"./MagnifyingGlassIcon-D3UcIlUc.js";import{r as E}from"./ClockIcon-1Kz2V9WE.js";import{r as G}from"./XMarkIcon-BWTnXq2K.js";import{r as q}from"./CheckIcon-CjTfIMhZ.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const J={props:{errors:Object,students:Object,subjects:Object,filter_data:Object},components:{AppLayout:B,Pagination:F,CheckIcon:q,XMarkIcon:G,ClockIcon:E,Multiselect:H,MagnifyingGlassIcon:X},data(){var s;return{visible:!1,loading:!1,date_value:this.filter_data.date?b(this.filter_data.date):"",customDateFormat:"YYYY-MM-DD",form:{student:"",status:"",late_amount:"",subject:"",date:this.filter_data.date?this.filter_data.date:""},filter:{subject:this.filter_data.subject?this.filter_data.subject:(s=this.subjects[0])==null?void 0:s.id,date:this.filter_data.date?this.filter_data.date:""}}},watch:{"filter.subject":function(s,r){b(this.filter.date).isValid()&&s!==r&&this.filterData()}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("student.attendance.index"),this.filter,{preserveScroll:!0,onFinish:s=>{this.loading=!1}})},submit(s,r){this.form.student=s,this.form.status=r,r!="late"&&this.save(),r=="late"&&(this.visible=!0)},save(){this.form.subject=this.filter.subject,this.form.date=this.filter_data.date,this.$inertia.post(this.route("student.attendance.store"),this.form,{preserveScroll:!0,onSuccess:s=>{this.visible=!1}})},getDateTimeFormat(){if(!isNaN(this.date_value)){const s=b(this.date_value).format("YYYY-MM-DD");this.filter.date=s}}}},K={class:"my-6"},Q={class:"col-span-2"},R={class:"col-span-2"},W={class:"col-span-1 text-right"},Z={key:0,class:"w-full mt-4"},$={class:"py-4 px-5 whitespace-nowrap"},ee={class:"py-4 px-5 whitespace-nowrap"},te={style:{width:"35%"},class:"py-4 px-5 whitespace-nowrap"},se={class:"py-4 px-5 whitespace-nowrap"},re={class:"py-4 px-5 text-black dark:text-gray-400 whitespace-nowrap"},ae={class:"inline-flex gap-2 items-center text-sm text-gray-900 dark:text-gray-400 font-medium"},oe=["src","alt"],ie={class:"flex flex-col"},le={class:"font-medium"},ne={class:"py-4 px-5 text-black dark:text-gray-400 whitespace-nowrap"},de={class:"py-4 px-5 text-black dark:text-gray-400 whitespace-nowrap"},ce={class:"flex gap-2"},ue={key:0},_e={key:0,class:"flex items-center gap-1 text-center"},pe={class:"text-green-500 capitalize"},me={key:1,class:"flex gap-1 items-center text-center"},fe={class:"text-red-500 capitalize"},be={key:2,class:"flex gap-1 items-center text-center"},ge={class:"flex gap-1 items-center"},he={class:"text-purple-500 capitalize"},ye={class:"py-4 px-5 whitespace-nowrap"},ke={class:"flex gap-1 text-center whitespace-nowrap w-full"},ve=["onClick"],xe=["id"],we=["for"],je=["onClick"],Me=["id"],Ce=["for"],De=["onClick"],Le=["id"],Ie=["for"],Se={key:1},Ve={colspan:"4",class:"text-center p-4"},Ae={class:"flex justify-center col-span-3"},Ne={key:1,class:"w-full mt-8 text-center text-lg pt-8"},Ye={action:""},Be={class:"mb-1 ml-4 mr-4"},Fe={for:"late_minutes",class:"block mb-2 items-center text-sm font-medium text-gray-900 dark:text-gray-400"},Te=["placeholder"];function Oe(s,r,p,ze,c,u){const k=o("Head"),v=o("BreadcrumbLink"),x=o("Breadcrumb"),w=o("page-header"),j=o("Multiselect"),M=o("a-date-picker"),C=o("global-button"),D=o("CheckIcon"),L=o("XMarkIcon"),I=o("ClockIcon"),S=o("global-table"),V=o("pagination"),A=o("input-error"),N=o("a-modal"),Y=o("AppLayout");return d(),n(m,null,[i(k,{title:s.__("Attendance List")},null,8,["title"]),i(Y,null,{default:_(()=>[i(x,null,{default:_(()=>[i(v,{title:s.__("Attendance List")},null,8,["title"])]),_:1}),e("div",K,[i(w,null,{default:_(()=>[h(a(s.__("Attendance List")),1)]),_:1}),e("form",{onSubmit:r[2]||(r[2]=O((...t)=>u.filterData&&u.filterData(...t),["prevent"])),class:"items-center grid grid-cols-1 md:grid-cols-7 gap-4 mt-4"},[e("div",Q,[i(j,{id:"subject","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:c.filter.subject,"onUpdate:modelValue":r[0]||(r[0]=t=>c.filter.subject=t),"create-option":!1,placeholder:s.__("Select Subject"),options:p.subjects.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),e("div",R,[i(M,{name:"date",class:"ant-datepicker-custom dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",format:u.getDateTimeFormat(),value:c.date_value,"onUpdate:value":r[1]||(r[1]=t=>c.date_value=t)},null,8,["format","value"])]),e("div",W,[i(C,{loading:c.loading,type:"submit",theme:"primary"},{default:_(()=>[h(a(s.__("Search")),1)]),_:1},8,["loading"])])],32),p.filter_data!=""?(d(),n("div",Z,[i(S,null,{head:_(()=>[e("th",$,a(s.__("Student Name")),1),e("th",ee,a(s.__("Student ID")),1),e("th",te,a(s.__("Status")),1),e("th",se,a(s.__("Today action")),1)]),body:_(()=>[p.students.data.length>0?(d(!0),n(m,{key:0},y(p.students.data,t=>{var g;return d(),n("tr",{class:"rounded-lg border-b dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600",key:t.id},[e("td",re,[e("span",ae,[e("img",{class:"w-10 h-10 rounded-full",src:t.profile_photo_url,alt:t.name},null,8,oe),e("div",ie,[e("span",le,a(t.name),1),e("span",null,a(t.email),1)])])]),e("td",ne,a(((g=t==null?void 0:t.profile)==null?void 0:g.student_id)??""),1),e("td",de,[e("div",ce,[(d(!0),n(m,null,y(t.attendances,l=>(d(),n(m,{key:l.id},[c.filter.subject==l.subject_id?(d(),n("div",ue,[l.status=="present"?(d(),n("div",_e,[i(D,{class:"text-green-500 w-4 h-4"}),e("span",pe,a(l.status),1)])):f("",!0),l.status=="absent"?(d(),n("div",me,[i(L,{class:"text-red-500 w-4 h-4"}),e("span",fe,a(l.status),1)])):f("",!0),l.status=="late"?(d(),n("div",be,[e("div",ge,[e("div",null,[i(I,{class:"text-purple-500 w-6 h-6"})]),e("span",he,a(l.late_amount)+" "+a(l.late_amount>1?s.__("Minutes Late"):s.__("Minute Late")),1)])])):f("",!0)])):f("",!0)],64))),128))])]),e("td",ye,[e("div",ke,[e("div",{class:"flex w-28 items-center cursor-pointer pl-4 rounded border border-gray-300 dark:border-gray-700",onClick:l=>u.submit(t.id,"present")},[e("input",{id:"present"+t.id,type:"radio",value:"",name:"bordered-radio",class:"text-blue-600 inline-block bg-gray-100 border-gray-300 focus:ring-blue-500 cursor-pointer dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,xe),e("label",{for:"present"+t.id,class:"py-2 ml-2 whitespace-nowrap cursor-pointer mr-2 w-full text-sm font-medium text-gray-900 dark:text-gray-400"},a(s.__("Present")),9,we)],8,ve),e("div",{class:"flex w-28 items-center cursor-pointer pl-4 rounded border border-gray-300 dark:border-gray-700",onClick:l=>u.submit(t.id,"absent")},[e("input",{id:"absent"+t.id,type:"radio",value:"",name:"bordered-radio",class:"text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 cursor-pointer dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Me),e("label",{for:"absent"+t.id,class:"py-2 ml-2 mr-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-400"},a(s.__("Absent")),9,Ce)],8,je),e("div",{class:"flex w-28 items-center cursor-pointer pl-4 rounded border border-gray-300 dark:border-gray-700",onClick:l=>u.submit(t.id,"late")},[e("input",{id:"late"+t.id,type:"radio",value:"",name:"bordered-radio",class:"text-blue-600 cursor-pointer bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Le),e("label",{for:"late"+t.id,class:"py-2 ml-2 mr-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-400"},a(s.__("Late")),9,Ie)],8,De)])])])}),128)):(d(),n("tr",Se,[e("td",Ve,a(s.__("No Students")),1)]))]),_:1}),e("div",Ae,[i(V,{class:"mt-6",links:p.students.links},null,8,["links"])])])):(d(),n("div",Ne," Please select the subject and date to take attendance. "))]),i(N,{visible:c.visible,"onUpdate:visible":r[4]||(r[4]=t=>c.visible=t),title:s.__("Late Time"),onOk:r[5]||(r[5]=t=>u.save())},{default:_(()=>[e("form",Ye,[e("div",Be,[e("label",Fe,[e("span",null,a(s.__("Late Minutes")),1),r[6]||(r[6]=e("span",{class:"text-red-500 ml-1 text-md"},"âˆ—",-1))]),z(e("input",{type:"number",class:P([p.errors.title?"border-red-500 dark:border-red-500":"","pl-4 bg-gray-50 rounded-lg border border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:border-gray-600 dark:placeholder-gray-400 dark:focus:ring-blue-500 dark:focus:border-blue-500"]),id:"late_minutes","onUpdate:modelValue":r[3]||(r[3]=t=>c.form.late_minutes=t),name:"late_minutes",placeholder:s.__("Late Minutes")},null,10,Te),[[U,c.form.late_minutes]]),i(A,{error:s.$page.props.errors.title},null,8,["error"])])])]),_:1},8,["visible","title"])]),_:1})],64)}const st=T(J,[["render",Oe],["__scopeId","data-v-a398fd61"]]);export{st as default};
