import{_ as B}from"./AppLayout-D06oZWsy.js";import{S as F,T as j}from"./Student-DymruXMt.js";import{_ as E,r as t,c as h,o as c,w as u,a as o,b as s,i as f,t as g,l as O,h as b,n as _,e as P,m as q,H as A}from"./app-B4siR4nP.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const D={components:{AppLayout:B,TeacherComponent:j,Student:F},props:{errors:Object,roles:Object,departments:Object,parents:Object,classes:Object,user:Object,plans:Object},data(){return{loading:!1,image_preview:this.user.profile_photo_url,user_type:this.user.role,options:[],form:{name:this.user.name,email:this.user.email,password:"",password_confirmation:"",user_type:this.user.role,avatar:"",phone:this.user.phone,address:this.user.address,department:this.user.department_id,roll_no:this.user.profile?this.user.profile.roll_no:"",class:this.user.profile?this.user.profile.course_id:"",parent:this.user.profile?this.user.profile.parent_id:"",session:this.user.profile?this.user.profile.session:"",plan:this.user.profile?this.user.profile.plan_id:"",_method:"PUT",teacher_edit:!1}}},mounted(){window.location.search.substring(1)&&(this.form.teacher_edit=!0)},watch:{form:{deep:!0,handler(e,r){this.roleGet(e.user_type)}}},created(){for(const[e,r]of Object.entries(this.roles))this.options.push({value:r.name,label:r.name})},methods:{submit(){this.loading=!0,this.$inertia.post(this.route("users.update",this.user.id),this.form,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},browse(){this.$refs.picker.click()},change(e){this.form.avatar=e.target.files[0];let r=new FileReader;r.readAsDataURL(this.form.avatar),r.onload=d=>{this.image_preview=d.target.result}},roleGet(e){this.user_type=e},getChildData(e){this.form.department=e.department},getStudentData(e){this.form.department=e.department,this.form.roll_no=e.roll_no,this.form.class=e.class,this.form.parent=e.parent,this.form.session=e.session,this.form.plan=e.plan}}},N={class:"pb-12"},T={class:"overflow-x-auto sm:rounded-lg"},G={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},L={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},z={class:"mb-3"},I={class:"mb-3"},M={class:"mb-1"},R={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},H={class:"mb-3"},J=["src"],K={class:"mb-2 text-sm text-gray-500 dark:text-gray-400"},Q={class:"font-semibold"},W={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},X={class:"mb-3"},Y={class:"mb-1"},Z={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},x={class:"mb-3"},$={class:"mb-1"},ee=["placeholder"];function re(e,r,d,oe,a,p){const y=t("BreadcrumbLink"),k=t("Breadcrumb"),w=t("global-button"),v=t("page-header"),n=t("global-label"),m=t("global-input"),i=t("input-error"),V=t("a-select"),C=t("teacher-component"),U=t("student"),S=t("AppLayout");return c(),h(S,{title:e.__("User Edit")},{default:u(()=>[o(k,null,{default:u(()=>[o(y,{href:e.route("users.index"),title:"Users"},null,8,["href"]),o(y,{title:e.__("User Edit")},null,8,["title"])]),_:1}),s("div",N,[o(v,null,{content:u(()=>[o(w,{"preserve-scroll":"",type:"link",url:e.route("users.index"),theme:"primary"},{default:u(()=>[f(g(e.__("All User")),1)]),_:1},8,["url"])]),default:u(()=>[f(g(e.__("User Edit"))+" ",1)]),_:1}),s("div",T,[s("form",{class:"mt-2",onSubmit:r[9]||(r[9]=O(l=>p.submit(),["prevent"])),enctype:"multipart/form-data"},[s("div",G,[s("div",L,[s("div",z,[o(n,{for:"name",value:"Name",required:!1}),o(m,{type:"text",modelValue:a.form.name,"onUpdate:modelValue":r[0]||(r[0]=l=>a.form.name=l),id:"name",name:"name",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Name"),error:e.$page.props.errors.name},null,8,["modelValue","placeholder","error"]),o(i,{error:e.$page.props.errors.name},null,8,["error"])]),s("div",I,[o(n,{for:"email",value:"Email",required:!1}),o(m,{type:"email",modelValue:a.form.email,"onUpdate:modelValue":r[1]||(r[1]=l=>a.form.email=l),id:"email",name:"email",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Enter Email"),error:e.$page.props.errors.email},null,8,["modelValue","placeholder","error"]),o(i,{error:e.$page.props.errors.email},null,8,["error"])]),s("div",M,[o(n,{for:"role",value:"Select User Type",required:!1}),o(V,{disabled:"",class:_([e.$page.props.errors.user_type?"border-custom ":"","width-100"]),size:"large",value:a.form.user_type,"onUpdate:value":r[2]||(r[2]=l=>a.form.user_type=l),"show-search":"",placeholder:e.__("Select a sections"),options:a.options,"filter-option":e.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["class","value","placeholder","options","filter-option","onFocus","onBlur","onChange"]),o(i,{error:e.$page.props.errors.user_type},null,8,["error"])])]),s("div",R,[s("div",H,[o(n,{for:"dropzone-file",value:"Avatar",required:!1}),s("div",{class:_(["w-full grid items-center gap-2",a.image_preview?"grid-cols-2":"grid-cols-1"])},[a.image_preview?(c(),P("img",{key:0,class:"w-48 h-48 rounded-full",src:a.image_preview,alt:""},null,8,J)):b("",!0),s("div",{onClick:r[3]||(r[3]=(...l)=>p.browse&&p.browse(...l)),class:"w-full cursor-pointer h-48 border-2 border-gray-300 bg-white opacity-80 flex flex-col dark:bg-gray-800 dark:border-gray-600 justify-center items-center pt-5 pb-6"},[s("p",K,[s("span",Q,g(e.__("Click to upload")),1),f(" "+g(e.__("or drag and drop")),1)]),r[10]||(r[10]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," SVG, PNG, JPG or GIF ",-1))]),s("input",{name:"image",type:"file",class:"hidden",ref:"picker",onChange:r[4]||(r[4]=(...l)=>p.change&&p.change(...l))},null,544)],2),o(i,{error:e.$page.props.errors.avatar},null,8,["error"])])]),s("div",W,[s("div",X,[o(n,{for:"password",value:"Password",required:!1}),o(m,{type:"password",modelValue:a.form.password,"onUpdate:modelValue":r[5]||(r[5]=l=>a.form.password=l),id:"password",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Password"),error:e.$page.props.errors.password},null,8,["modelValue","placeholder","error"]),o(i,{error:e.$page.props.errors.password},null,8,["error"])]),s("div",Y,[o(n,{for:"password_confirmation",value:"Confirm Password",required:!1}),o(m,{type:"password",modelValue:a.form.password_confirmation,"onUpdate:modelValue":r[6]||(r[6]=l=>a.form.password_confirmation=l),id:"password_confirmation",name:"password_confirmation",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Confirm Password"),error:e.$page.props.errors.password_confirmation},null,8,["modelValue","placeholder","error"]),o(i,{error:e.$page.props.errors.password_confirmation},null,8,["error"])])]),s("div",Z,[s("div",x,[o(n,{for:"phone",value:"Phone",required:!1}),o(m,{type:"number",modelValue:a.form.phone,"onUpdate:modelValue":r[7]||(r[7]=l=>a.form.phone=l),id:"phone",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Phone"),error:e.$page.props.errors.phone},null,8,["modelValue","placeholder","error"]),o(i,{error:e.$page.props.errors.phone},null,8,["error"])]),s("div",$,[o(n,{for:"address",value:"Address",required:!1}),q(s("textarea",{"onUpdate:modelValue":r[8]||(r[8]=l=>a.form.address=l),name:"",placeholder:e.__("Address"),id:"address",class:_([d.errors.address?"border-red-500 dark:border-red-500":"","pl-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"])},null,10,ee),[[A,a.form.address]]),o(i,{error:e.$page.props.errors.address},null,8,["error"])])]),a.user_type=="Teacher"?(c(),h(C,{key:0,user:d.user,departments:d.departments,onChildForm:p.getChildData},null,8,["user","departments","onChildForm"])):b("",!0),a.user_type=="Student"?(c(),h(U,{key:1,onStudentForm:p.getStudentData,departments:d.departments,user:d.user,classes:d.classes,parents:d.parents,plans:d.plans},null,8,["onStudentForm","departments","user","classes","parents","plans"])):b("",!0)]),o(w,{loading:a.loading,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:u(()=>[f(g(e.__("Save")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["title"])}const ce=E(D,[["render",re],["__scopeId","data-v-286ecf1b"]]);export{ce as default};
