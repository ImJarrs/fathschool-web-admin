import{_ as w}from"./AppLayout-pRkTteQX.js";import{_ as M,k as n,N as Y,r as s,c as _,o as f,w as l,a,h as B,b as e,t as h,l as L,i as N,s as R,f as S}from"./app-R3TKzMFz.js";import{s as E}from"./multiselect-S7NpFuS0.js";/* empty css                                                         */import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./XMarkIcon-8_3jvOSV.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";const j={components:{AppLayout:w,Multiselect:E,NothingFound:Y,dayjs:n},props:{filter_data:Object},data(){return{filter:S.useForm({month:this.filter_data.month??"",year:this.filter_data.year??""}),visible:!1,loading:!1,month_value:this.filter_data.month?n(n(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,export_data:{month:"",year:""}}},watch:{month_value:function(t){t?(this.filter.month=n(t).format("MM"),this.filter.year=n(t).format("YYYY")):(this.filter.month=null,this.filter.year=null)}},methods:{exportSubmit(){console.log(this.filter),this.loading=!0,this.export_data.month=this.filter.month,this.export_data.year=this.filter.year,R({url:this.route("report.expense.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(t=>{var o=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=o;const d=t.headers["content-disposition"],i=d.indexOf('"')+1,p=d.lastIndexOf('"'),c=d.substring(i,p);r.setAttribute("download",c),document.body.appendChild(r),r.click(),r.remove(),this.loading=!1,this.visible=!1}).catch(t=>{this.loading=!1,this.visible=!1})},handleYearSelection(){const t=this.year.$y;this.filter.year=t}}},C={class:"text-center"},F={class:"pb-12 pt-2"},O={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},V={class:"dark:text-gray-400 mb-0 text-2xl"},A={class:"col-span-2"},I={class:"flex gap-3"},U={class:"col-span-2"},T={class:"text-center mt-52"},z={class:"mt-2 text-sm font-medium text-gray-900"};function D(t,o,r,d,i,p){const c=s("BreadcrumbLink"),b=s("Breadcrumb"),m=s("page-header"),g=s("global-label"),x=s("a-date-picker"),v=s("global-button"),y=s("NothingFound"),k=s("AppLayout");return f(),_(k,{title:t.__("Expense Report")},{default:l(()=>[a(b,null,{default:l(()=>[a(c,{href:t.route("reports.index"),title:"Report"},null,8,["href"]),a(c,{title:t.__("Expense Report")},null,8,["title"])]),_:1}),i.loading?(f(),_(m,{key:0},{default:l(()=>[e("div",C,h(t.__("It can take up to 2 minutes to generate this report, so please wait.")),1)]),_:1})):B("",!0),e("div",F,[e("div",O,[a(m,{class:"flex justify-between items-center"},{default:l(()=>[e("div",null,[e("h1",V,h(t.__("Expense Report")),1)])]),_:1}),e("form",{class:"grid grid-cols-1 md:grid-cols-8 gap-2 items-center px-6",onSubmit:o[1]||(o[1]=L(u=>p.exportSubmit(),["prevent"]))},[e("div",A,[a(g,{for:"month",value:"Month"}),e("div",I,[a(x,{size:"large",placeholder:t.__("Select Month"),picker:"month",value:i.month_value,"onUpdate:value":o[0]||(o[0]=u=>i.month_value=u),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),e("div",U,[a(v,{loading:i.loading,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:l(()=>[N(h(t.__("Export")),1)]),_:1},8,["loading"])])],32)]),e("div",T,[o[2]||(o[2]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)),e("h3",z,[a(y,{asShow:"div"})])])])]),_:1},8,["title"])}const et=M(j,[["render",D]]);export{et as default};
