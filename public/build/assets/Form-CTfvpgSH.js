import{_ as U}from"./AppLayout-D06oZWsy.js";import{_ as N,f as j,r as n,c as q,o as f,w as u,a as r,b as s,i as h,t as m,l as L,e as g,F as P,j as S,n as k,h as T}from"./app-B4siR4nP.js";import{s as F}from"./multiselect-BtWcUH1S.js";/* empty css                */import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const M={components:{Multiselect:F,AppLayout:U},props:{courses:Object,plan:Object,benefits:Array,amounts:Array,plan_courses:Array,currencies:Array},data(){return{benefit_amount:[1],form:j.useForm({title:this.plan?this.plan.title:"",description:this.plan?this.plan.description:"",course:this.plan?this.plan.course_id:"",benefits:this.benefits??[],amounts:this.amounts??[],currency:this.plan?this.plan.currency:"",_method:this.plan?"PUT":"POST"})}},mounted(){if(this.plan)for(let e=1;e<this.benefits.length;e++){let o=this.benefit_amount.length;this.benefit_amount.push(o+1)}},methods:{submit(){this.plan?this.form.post(this.route("plan.update",this.plan.id),{onSuccess:()=>{this.$emit("update"),this.form.reset("title","price","description","courses","currency")}}):this.form.post(this.route("plan.store"),{onSuccess:()=>{this.form.reset("title","price","description","courses","currency")}})},addBenefit(){let e=this.benefit_amount.length;this.benefit_amount.push(e+1)},removeBenefit(e){this.form.benefits.splice(e,1),this.form.amounts.splice(e,1),this.benefit_amount.splice(e,1)}}},D={class:"max-w-2xl flex flex-col gap-5 mx-auto px-4 rounded bg-white dark:bg-gray-800 p-5 dark:border-gray-700"},O={class:"mt-3"},E={class:"mt-3"},z={class:"mt-3"},R={class:"flex items-left justify-between"},x={class:"flex items-left justify-between -mt-1"},G=["onClick"],H={type:"button",class:"text-blue-500 hover:text-blue-600"},I={class:"flex justify-center items-center -mt-2"};function J(e,o,b,K,l,d){const V=n("BreadcrumbLink"),w=n("Breadcrumb"),y=n("global-button"),B=n("page-header"),i=n("global-label"),_=n("global-input"),p=n("input-error"),v=n("Multiselect"),A=n("global-textarea"),C=n("AppLayout");return f(),q(C,{title:e.__("Add New Plan")},{default:u(()=>[r(w,null,{default:u(()=>[r(V,{title:e.__("Add New Plan")},null,8,["title"])]),_:1}),s("div",null,[r(B,null,{content:u(()=>[r(y,{url:e.route("plan.index"),loading:!1,type:"link",theme:"primary"},{default:u(()=>[h(m(e.__("All Plan")),1)]),_:1},8,["url"])]),default:u(()=>[h(m(e.__("Add New Plan"))+" ",1)]),_:1})]),s("form",{onSubmit:o[5]||(o[5]=L((...t)=>d.submit&&d.submit(...t),["prevent"]))},[s("div",D,[s("div",null,[s("div",null,[r(i,{for:"title",value:"Title",required:!0}),r(_,{type:"text",id:"title",modelValue:l.form.title,"onUpdate:modelValue":o[0]||(o[0]=t=>l.form.title=t),name:"title",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Title"),error:e.$page.props.errors.title},null,8,["modelValue","placeholder","error"]),r(p,{error:e.$page.props.errors.title},null,8,["error"])]),s("div",O,[r(i,{for:"course",value:"Course",required:!0}),r(v,{id:"course","close-on-select":!0,"can-clear":!0,searchable:!0,modelValue:l.form.course,"onUpdate:modelValue":o[1]||(o[1]=t=>l.form.course=t),"create-option":!1,placeholder:"Course",options:b.courses.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","options"]),r(p,{error:e.$page.props.errors.course},null,8,["error"])]),s("div",E,[r(i,{for:"currency",value:"Currency",required:!0}),r(v,{id:"currency","close-on-select":!0,"can-clear":!0,searchable:!0,modelValue:l.form.currency,"onUpdate:modelValue":o[2]||(o[2]=t=>l.form.currency=t),"create-option":!1,placeholder:"Currency",options:b.currencies.map(t=>({value:t.code,label:t.name})),autocomplete:"off"},null,8,["modelValue","options"]),r(p,{error:e.$page.props.errors.currency},null,8,["error"])]),s("div",z,[r(i,{for:"description",value:"Description",required:!1}),r(A,{id:"description",modelValue:l.form.description,"onUpdate:modelValue":o[3]||(o[3]=t=>l.form.description=t),name:"description",class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Description"),error:e.$page.props.errors.description},null,8,["modelValue","placeholder","error"]),r(p,{error:e.$page.props.errors.description},null,8,["error"])]),o[6]||(o[6]=s("div",{class:"mt-4"},null,-1)),(f(!0),g(P,null,S(l.benefit_amount,(t,a)=>(f(),g("div",{key:a,class:k(a!=0?"mt-3":"")},[s("div",R,[r(i,{for:"title",class:"w-full",value:"Benefit",required:!0}),r(i,{for:"title",class:"w-4/12",value:"Amount",required:!0})]),s("div",x,[r(_,{type:"text",id:"title",modelValue:l.form.benefits[a],"onUpdate:modelValue":c=>l.form.benefits[a]=c,name:"title",class:"mt-1 block w-full rounded-r-none dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400 testBenefits",placeholder:e.__("Benefit"),error:e.$page.props.errors.benefits},null,8,["modelValue","onUpdate:modelValue","placeholder","error"]),r(_,{type:"number",id:"title",modelValue:l.form.amounts[a],"onUpdate:modelValue":c=>l.form.amounts[a]=c,name:"title",class:"mt-1 block w-4/12 dark:bg-gray-700 dark:border-gray-600 rounded-l-none dark:text-gray-400 testAmounts",placeholder:e.__("Amount"),error:e.$page.props.errors.amounts},null,8,["modelValue","onUpdate:modelValue","placeholder","error"])]),r(p,{error:e.$page.props.errors.benefits},null,8,["error"]),a!=0?(f(),g("button",{key:0,onClick:c=>d.removeBenefit(a),type:"button",class:"text-red-500 mt-1 hover:text-red-600"},m(e.__("Remove Benefit")),9,G)):T("",!0)],2))),128)),s("div",{onClick:o[4]||(o[4]=t=>d.addBenefit()),class:k(["flex justify-end",l.benefit_amount.length>1?"-mt-[22px]":"mt-1"])},[s("button",H,m(e.__("Add New Benefit")),1)],2)]),s("div",I,[r(y,{loading:l.form.processing,type:"submit",cssClass:"w-full mb-4",theme:"primary"},{default:u(()=>[h(m(b.plan?e.__("Update"):e.__("Submit")),1)]),_:1},8,["loading"])])])],32)]),_:1},8,["title"])}const ne=N(M,[["render",J]]);export{ne as default};
