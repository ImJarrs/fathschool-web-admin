import{_ as U}from"./AppLayout-D06oZWsy.js";import{_ as V,r as a,c as L,o as w,w as i,a as e,b as r,i as p,t as c,l as S,m as d,H as m,s as A,f as B}from"./app-B4siR4nP.js";import{s as C}from"./multiselect-BtWcUH1S.js";/* empty css                */import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const T={components:{AppLayout:U,Multiselect:C},props:{users:Array,errors:Object},data(){return{roles:[{value:"Teacher",label:"Teacher"},{value:"Student",label:"Student"},{value:"Accountant",label:"Accountant"}],filteredUsers:[],form:B.useForm({role:null,user:null,date:null,time_in:null,time_out:null,latlon_in:"",latlon_out:""})}},methods:{async fetchUsersByRole(){if(!this.form.role){this.filteredUsers=[];return}try{const o=await A.get(route("users.byRole",{role:this.form.role}));this.filteredUsers=o.data}catch(o){console.error("Error fetching users by role:",o)}},submit(){this.form.post(route("attendance.store"),{preserveScroll:!0,onSuccess:()=>{this.form.reset("role","user","date","time_in","time_out","latlon_in","latlon_out")}})}}},q={class:"pb-12"},M={class:"rounded-lg"},R={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},x={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},N={class:"mb-3"},D={class:"mb-3"},I={class:"mb-3"},O={class:"mb-3"},E={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},F={class:"mb-3"},j={class:"mb-3"},H={class:"mb-3"};function z(o,s,G,J,t,f){const _=a("BreadcrumbLink"),y=a("Breadcrumb"),g=a("global-button"),v=a("Link"),h=a("page-header"),n=a("global-label"),b=a("Multiselect"),u=a("input-error"),k=a("AppLayout");return w(),L(k,{title:o.__("Create Attendance")},{default:i(()=>[e(y,null,{default:i(()=>[e(_,{href:o.route("attendance.create"),title:"Attendance List"},null,8,["href"]),e(_,{title:"Create Attendance"})]),_:1}),r("div",q,[e(h,null,{content:i(()=>[e(v,{"preserve-scroll":"",href:o.route("attendance.create")},{default:i(()=>[e(g,{loading:!1,type:"button",theme:"primary"},{default:i(()=>[p(c(o.__("Back To List")),1)]),_:1})]),_:1},8,["href"])]),default:i(()=>[p(c(o.__("Create a New Attendance Record"))+" ",1)]),_:1}),r("div",M,[r("form",{class:"mt-2",onSubmit:s[7]||(s[7]=S(l=>f.submit(),["prevent"]))},[r("div",R,[r("div",x,[r("div",N,[e(n,{for:"role",value:"Select Role",required:!0}),e(b,{id:"role",class:"dark:text-gray-900",modelValue:t.form.role,"onUpdate:modelValue":s[0]||(s[0]=l=>t.form.role=l),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:"Select a role",options:t.roles,autocomplete:"off",onChange:f.fetchUsersByRole},null,8,["modelValue","options","onChange"]),e(u,{error:o.$page.props.errors.role},null,8,["error"])]),r("div",D,[e(n,{for:"user",value:"Select User",required:!0}),e(b,{id:"user",class:"dark:text-gray-900",modelValue:t.form.user,"onUpdate:modelValue":s[1]||(s[1]=l=>t.form.user=l),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:"Select a user",options:t.filteredUsers.map(l=>({value:l.id,label:l.name})),autocomplete:"off"},null,8,["modelValue","options"]),e(u,{error:o.$page.props.errors.user},null,8,["error"])]),r("div",I,[e(n,{for:"date",value:"Date",required:!0}),d(r("input",{id:"date",type:"date","onUpdate:modelValue":s[2]||(s[2]=l=>t.form.date=l),class:"custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",autocomplete:"off"},null,512),[[m,t.form.date]]),e(u,{error:o.$page.props.errors.date},null,8,["error"])]),r("div",O,[e(n,{for:"time_in",value:"Time In",required:!0}),d(r("input",{id:"time_in",type:"time","onUpdate:modelValue":s[3]||(s[3]=l=>t.form.time_in=l),class:"custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",autocomplete:"off"},null,512),[[m,t.form.time_in]]),e(u,{error:o.$page.props.errors.time_in},null,8,["error"])])]),r("div",E,[r("div",F,[e(n,{for:"latlon_in",value:"Latitude, Longitude In",required:!0}),d(r("input",{id:"latlon_in",type:"text","onUpdate:modelValue":s[4]||(s[4]=l=>t.form.latlon_in=l),class:"custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",placeholder:"e.g. 12.3456, 98.7654",autocomplete:"off"},null,512),[[m,t.form.latlon_in]]),e(u,{error:o.$page.props.errors.latlon_in},null,8,["error"])]),r("div",j,[e(n,{for:"latlon_out",value:"Latitude, Longitude Out"}),d(r("input",{id:"latlon_out",type:"text","onUpdate:modelValue":s[5]||(s[5]=l=>t.form.latlon_out=l),class:"custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",placeholder:"e.g. 12.3456, 98.7654",autocomplete:"off"},null,512),[[m,t.form.latlon_out]]),e(u,{error:o.$page.props.errors.latlon_out},null,8,["error"])]),r("div",H,[e(n,{for:"time_out",value:"Time Out"}),d(r("input",{id:"time_out",type:"time","onUpdate:modelValue":s[6]||(s[6]=l=>t.form.time_out=l),class:"custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400",autocomplete:"off"},null,512),[[m,t.form.time_out]]),e(u,{error:o.$page.props.errors.time_out},null,8,["error"])])])]),e(g,{loading:t.form.processing,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:i(()=>[p(c(o.__("Save")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["title"])}const le=V(T,[["render",z],["__scopeId","data-v-d15a1760"]]);export{le as default};
