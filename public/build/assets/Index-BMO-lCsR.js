import{_ as W}from"./AppLayout-D06oZWsy.js";import{P as Y}from"./Pagination-DHbdUHOs.js";import Z from"./Form-D2VKGYgq.js";import{T as $}from"./ToolTip-DNh-kznG.js";import ee from"./Show-BooWbXzv.js";import{_ as te}from"./Modal-DEp1tEtC.js";import{F as se}from"./FullCalendar-DuWZudhp.js";import{T as oe}from"./TdUserShow-CNKyPY6R.js";import{_ as le,N as ne,r as n,e as _,o as c,a as o,w as i,b as t,t as r,i as h,l as ae,m as k,H as w,c as re,F as g,j as x,h as y,n as ie,f as de}from"./app-B4siR4nP.js";import{r as ce}from"./XMarkIcon-BWTnXq2K.js";import{r as ue}from"./CheckIcon-CjTfIMhZ.js";import{r as pe}from"./EyeIcon-BOU59fVo.js";import{r as _e}from"./MagnifyingGlassIcon-D3UcIlUc.js";import{r as he}from"./TrashIcon-Y0IuqUC6.js";import{r as me}from"./PencilSquareIcon-D3Yw7vGl.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";import"./main-hbmm7GV_.js";import"./main-DLgbzNsy.js";import"./main-BIoG3jBW.js";const ge={props:{leaves:Object,filter_data:Object,users:Object,leave_types:Object,classes:Object},data(){return{loading:!1,options:[],options2:[],causeModal:!1,filter:{keyword:this.filter_data.keyword??"",status:this.filter_data.status??null,role:this.filter_data.role??null,leave_type:this.filter_data.leave_type??null,class:this.filter_data.class??null,start_date:this.filter_data.start_date??null,end_date:this.filter_data.end_date??null},searchQuery:this.filter_data.keyword??"",leave:"",visible:!1,show_leave:"",reject:de.useForm({id:"",cause_description:""})}},created(){this.options.push({value:"",label:"All"});for(const[e,l]of Object.entries(this.leave_types))this.options.push({value:l.slug,label:l.name});this.options2.push({value:"",label:"All"});for(const[e,l]of Object.entries(this.classes))this.options2.push({value:l.slug,label:l.name})},components:{AppLayout:W,Pagination:Y,PencilSquareIcon:me,TrashIcon:he,RejectModal:te,MagnifyingGlassIcon:_e,EditForm:Z,EyeIcon:pe,CheckIcon:ue,XMarkIcon:ce,TdUserShow:oe,ToolTip:$,ShowModal:ee,FullCalendar:se,NothingFound:ne},watch:{searchQuery(e){this.filter.keyword=e,this.filterData()}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("leave-student.index"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,l){return l.label.toLowerCase().indexOf(e.toLowerCase())>=0},statusChange(e,l){this.loading=!0,this.$inertia.post(this.route("leave.status.change",e),{status:l,cause:this.reject.cause_description},{preserveScroll:!0,onSuccess:u=>{this.closeModal()},onFinish:u=>{this.loading=!1}})},rejectStatus(e){this.reject.id=e,this.causeModal=!0},closeModal(){this.reject.cause_description="",this.reject.id="",this.causeModal=!1},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("leave-student.destroy",e),{preserveScroll:!0});else return!1},edit(e){this.leave=e,this.$refs.editModal.showModal()},show(e){this.show_leave=e,this.visible=!0},hide(){this.visible=!1}}},fe={class:"pb-12 overflow-x-auto"},be={class:"dark:text-gray-400 flex items-center"},ye={class:"bg-blue-500 text-white rounded ml-2 px-1 text-xs py-0.5"},ve={class:"mb-4"},ke={class:"xl:col-span-2"},we={class:"relative w-full"},xe={type:"submit",class:"absolute inset-y-0 right-0 flex items-center px-3 text-white bg-blue-700 rounded-r-lg hover:bg-blue-800 focus:ring-2 focus:ring-blue-500"},Ce={class:"sr-only"},je={class:"xl:col-span-1"},Se={for:"start_date",class:"block mb-1 text-sm font-medium"},Fe={class:"xl:col-span-1"},Me={for:"end_date",class:"block mb-1 text-sm font-medium"},Be={class:"xl:col-span-1"},Ie={class:"xl:col-span-1"},Le={class:"xl:col-span-1"},Te={class:"xl:col-span-1"},Ve={class:"overflow-hidden"},Ae={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Oe={scope:"col",class:"py-4 px-5 whitespace-nowrap"},De={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ne={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ue={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ee={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Pe={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Re={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},ze={class:"py-4 px-5"},qe={class:"py-4 px-5"},Qe={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},Ge={key:0},He={class:"py-4 px-5"},Xe={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},Ke={class:"py-4 px-5 whitespace-nowrap"},Je={class:"mb-2"},We={class:"py-4 px-5"},Ye={class:"py-4 px-5"},Ze={class:"flex gap-1 items-center"},$e=["onClick","id"],et=["onClick","id"],tt=["onClick","id"],st=["onClick","id"],ot=["onClick","id"],lt={class:"flex justify-center"},nt={class:"bg-white rounded-lg overflow-x-auto dark:bg-gray-800"},at={class:"mb-1"};function rt(e,l,u,it,a,d){const C=n("Head"),j=n("BreadcrumbLink"),S=n("Breadcrumb"),f=n("global-button"),F=n("page-header"),M=n("global-input"),B=n("MagnifyingGlassIcon"),b=n("a-select"),I=n("td-user-show"),L=n("CheckIcon"),m=n("tool-tip"),T=n("XMarkIcon"),V=n("PencilSquareIcon"),A=n("eye-icon"),O=n("trash-icon"),D=n("NothingFound"),N=n("global-table"),U=n("pagination"),E=n("full-calendar"),P=n("edit-form"),R=n("a-button"),z=n("show-modal"),q=n("a-modal"),Q=n("global-label"),G=n("global-textarea"),H=n("input-error"),X=n("reject-modal"),K=n("AppLayout");return c(),_(g,null,[o(C,{title:e.__("Student Leave List")},null,8,["title"]),o(K,null,{default:i(()=>[o(S,null,{default:i(()=>[o(j,{title:e.__("Student Leave")},null,8,["title"])]),_:1}),t("div",fe,[o(F,null,{content:i(()=>[o(f,{loading:!1,type:"link",url:e.route("student-leave-type.index"),theme:"primary",id:"testLeaveType"},{default:i(()=>[h(r(e.__("Leave Type")),1)]),_:1},8,["url"])]),default:i(()=>[t("div",be,[t("span",null,r(e.__("Student Leave List")),1),t("span",ye,r(u.leaves.total),1)])]),_:1}),t("div",null,[t("div",ve,[t("form",{class:"grid grid-cols-1 gap-4 xl:grid-cols-7 xl:gap-4 items-end",onSubmit:l[6]||(l[6]=ae(s=>d.filterData(),["prevent"]))},[t("div",ke,[t("div",we,[o(M,{modelValue:a.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=s=>a.searchQuery=s),type:"text",class:"block w-full pr-10 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",xe,[o(B,{class:"w-5 h-5"}),t("span",Ce,r(e.__("Search")),1)])])]),t("div",je,[t("label",Se,r(e.__("From")),1),k(t("input",{type:"date",id:"start_date","onUpdate:modelValue":l[1]||(l[1]=s=>a.filter.start_date=s),class:"w-full p-2 border rounded"},null,512),[[w,a.filter.start_date]])]),t("div",Fe,[t("label",Me,r(e.__("To")),1),k(t("input",{type:"date",id:"end_date","onUpdate:modelValue":l[2]||(l[2]=s=>a.filter.end_date=s),class:"w-full p-2 border rounded"},null,512),[[w,a.filter.end_date]])]),t("div",Be,[o(b,{class:"w-full",size:"large",value:a.filter.leave_type,"onUpdate:value":l[3]||(l[3]=s=>a.filter.leave_type=s),"show-search":"",placeholder:e.__("Select a leave type"),options:a.options,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","onFocus","onBlur","onChange"])]),t("div",Ie,[o(b,{class:"w-full",size:"large",value:a.filter.class,"onUpdate:value":l[4]||(l[4]=s=>a.filter.class=s),"show-search":"",placeholder:e.__("Select a class"),options:a.options2,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","onFocus","onBlur","onChange"])]),t("div",Le,[o(b,{class:"w-full",size:"large",value:a.filter.status,"onUpdate:value":l[5]||(l[5]=s=>a.filter.status=s),"show-search":"",placeholder:e.__("Select a status"),options:[{title:"All",id:"all",value:"all"},{title:"Pending",id:"pending",value:"pending"},{title:"Accepted",id:"accepted",value:"accepted"},{title:"Rejected",id:"rejected",value:"rejected"}],onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","onFocus","onBlur","onChange"])]),t("div",Te,[o(f,{loading:a.loading,type:"submit",theme:"primary",class:"w-full"},{default:i(()=>[h(r(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",Ve,[o(N,null,{head:i(()=>[t("th",Ae,r(e.__("Name")),1),t("th",Oe,r(e.__("Course")),1),t("th",De,r(e.__("Role")),1),t("th",Ne,r(e.__("Leave Type")),1),t("th",Ue,r(e.__("Date")),1),t("th",Ee,r(e.__("Status")),1),t("th",Pe,r(e.__("Action")),1)]),body:i(()=>[u.leaves.data.length>0?(c(!0),_(g,{key:0},x(u.leaves.data,s=>{var v;return c(),_("tr",{key:s.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Re,[o(I,{image:s.user.profile_photo_url,name:s.user.name,email:s.user.email},null,8,["image","name","email"])]),t("td",ze,[(c(!0),_(g,null,x(s.user.courses,(p,J)=>(c(),_("div",{key:p.id,class:"font-bold ml-0.5"},[h(r(p.course?p.course.name:"")+" ",1),s.user.courses.length!=J+1?(c(),_(g,{key:0},[h(",")],64)):y("",!0)]))),128))]),t("td",qe,[t("div",Qe,r(s.user.role),1),s.user.department&&s.user.role=="Teacher"?(c(),_("div",Ge,r(s.user.department.name),1)):y("",!0)]),t("td",He,[t("div",Xe,r((v=s.type)==null?void 0:v.name),1)]),t("td",Ke,[t("div",Je,r(s.days),1),t("div",null,r(e.formatTime(s.start,""))+" - "+r(e.formatTime(s.end,"")),1)]),t("td",We,[t("span",{class:ie([s.status=="pending"?"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 dark:opacity-60":s.status=="accepted"?"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 dark:opacity-60":s.status=="rejected"?"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 dark:opacity-60":"","capitalize text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"])},r(s.status),3)]),t("td",Ye,[t("div",Ze,[s.status=="pending"?(c(),_(g,{key:0},[t("button",{type:"button",onClick:p=>d.statusChange(s.id,"accepted"),class:"group relative",id:"testAccept"+s.id},[o(L,{class:"text-green-500 w-6 h-6"}),o(m,{text:e.__("Accept")},null,8,["text"])],8,$e),t("button",{type:"button",onClick:p=>d.rejectStatus(s.id),class:"group relative",id:"testReject"+s.id},[o(T,{class:"text-red-500 w-6 h-6"}),o(m,{text:e.__("Reject")},null,8,["text"])],8,et),t("button",{onClick:p=>d.edit(s),type:"button",class:"group relative",id:"testEdit"+s.id},[o(V,{class:"text-blue-400 hover:text-blue-300 w-6 h-6"}),o(m,{text:e.__("Edit")},null,8,["text"])],8,tt)],64)):y("",!0),t("button",{onClick:p=>d.show(s),type:"button",class:"group relative",id:"testShow"+s.id},[o(A,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),o(m,{text:e.__("View")},null,8,["text"])],8,st),t("button",{type:"button",onClick:p=>d.destroy(s.id),class:"group relative",id:"testDelete"+s.id},[o(O,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),o(m,{text:e.__("Delete")},null,8,["text"])],8,ot)])])])}),128)):(c(),re(D,{key:1,asShow:"tr",cssClass:"text-center"}))]),_:1}),t("div",lt,[o(U,{class:"mt-6",links:u.leaves.links},null,8,["links"])])])])]),t("div",nt,[o(E,{data:u.leaves.data},null,8,["data"])]),o(P,{ref:"editModal",users:u.users,leave:a.leave},null,8,["users","leave"]),o(q,{visible:a.visible,"onUpdate:visible":l[7]||(l[7]=s=>a.visible=s),title:a.show_leave&&a.show_leave.user.name,onOk:d.hide},{footer:i(()=>[o(R,{key:"back",onClick:d.hide},{default:i(()=>[h(r(e.__("Close")),1)]),_:1},8,["onClick"])]),default:i(()=>[o(z,{leave:a.show_leave},null,8,["leave"])]),_:1},8,["visible","title","onOk"]),o(X,{show:a.causeModal,onClose:d.closeModal},{title:i(()=>[h(r(e.__("Insert Reject Cause")),1)]),content:i(()=>[t("div",at,[o(Q,{for:"description",value:"Cause",required:!0}),o(G,{placeholder:e.__("Description"),id:"name",error:e.$page.props.errors.cause,modelValue:a.reject.cause_description,"onUpdate:modelValue":l[8]||(l[8]=s=>a.reject.cause_description=s),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"},null,8,["placeholder","error","modelValue"]),o(H,{error:e.$page.props.errors.cause},null,8,["error"])])]),footer:i(()=>[o(f,{loading:!1,type:"button",onClick:l[9]||(l[9]=s=>d.closeModal()),class:"mr-2",theme:"outline-danger"},{default:i(()=>[h(r(e.__("Cancel")),1)]),_:1}),o(f,{loading:a.reject.processing,type:"button",onClick:l[10]||(l[10]=s=>d.statusChange(a.reject.id,"rejected"))},{default:i(()=>[h(r(e.__("Save")),1)]),_:1},8,["loading"])]),_:1},8,["show","onClose"])]),_:1})],64)}const At=le(ge,[["render",rt]]);export{At as default};
