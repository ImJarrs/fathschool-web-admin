import{r as N,_ as P}from"./AppLayout-D06oZWsy.js";import{T as O}from"./ToolTip-DNh-kznG.js";import{T as Z}from"./TdUserShow-CNKyPY6R.js";import{P as H}from"./Pagination-DHbdUHOs.js";import{e as _,o as d,b as t,_ as q,r as s,c as w,w as l,a as r,t as o,i as g,l as G,n as U,F as $,j as z,k as h}from"./app-B4siR4nP.js";import{r as J}from"./EyeIcon-BOU59fVo.js";import{r as K}from"./ArrowDownTrayIcon-BnoY29Wo.js";import{r as Q}from"./MagnifyingGlassIcon-D3UcIlUc.js";import{r as W}from"./ExclamationCircleIcon-Czo93NRy.js";import{r as X}from"./PencilSquareIcon-D3Yw7vGl.js";import{r as ee}from"./TrashIcon-Y0IuqUC6.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";function te(e,n){return d(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})])}const ae={components:{AppLayout:P,ToolTip:O,TrashIcon:ee,PencilSquareIcon:X,Pagination:H,ExclamationCircleIcon:W,MagnifyingGlassIcon:Q,PrinterIcon:te,ArrowDownTrayIcon:K,EnvelopeIcon:N,TdUserShow:Z,EyeIcon:J},props:{invoices:Object,filter_data:Object,users:Object,all_invoices:Object},data(){return{loading:!1,mail_sending:"",customDateFormat:"DD-MM-YYYY",date2:[this.filter_data.start_date?h(this.filter_data.start_date):null,this.filter_data.end_date?h(this.filter_data.end_date):null],filter:{keyword:this.filter_data.keyword??"",start_date:this.filter_data.start_date??"",end_date:this.filter_data.end_date??"",recurring:this.filter_data.recurring??""},tab:this.filter_data.recurring??"all"}},watch:{date2:{deep:!0,handler(e,n){if(e!=null)if(this.date2[0]!=null&&this.date2[1]!=null){let i=h(this.date2[0]).format("YYYY-MM-DD"),f=h(this.date2[1]).format("YYYY-MM-DD");this.filter.start_date=i,this.filter.end_date=f}else this.filter.start_date="",this.filter.end_date="";else this.filter.start_date="",this.filter.end_date=""}}},methods:{destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("invoice.destroy",e));else return!1},filterData(){this.loading=!0,this.$inertia.get(this.route("invoice.index"),this.filter,{onFinish:e=>{this.loading=!1}})},sendInvoiceViaEmail(e){this.mail_sending=e,this.$inertia.get(route("invoice.send.email",e),{preserveScroll:!0},{onFinish:n=>{this.mail_sending=!1}})},setTabValue(e){let n=e.filter_column_data??"",i=e.value??"";this.filter[n]=i},status(e,n){let i=e.target.checked;this.$inertia.post(this.route("invoice.recurring.status",n),{status:i},{preserveScroll:!0})}}},re={class:"pb-12"},se={class:"flex items-center gap-2"},oe={class:"text-[10px] sm:text-sm"},ne={class:"group relative"},ie={class:"sm:mb-4 mb-1.5"},le={class:"relative flex-grow"},de={type:"submit",class:"absolute top-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ce={class:"flex-grow"},_e={class:"flex-grow-0"},ue={class:"col-span-2 bg-white dark:bg-gray-800 dark:text-gray-600 rounded-lg",id:"testInvoiceDataTable"},pe={class:"py-4 px-5 whitespace-nowrap"},he={class:"py-4 px-5 whitespace-nowrap"},me={class:"py-4 px-5 whitespace-nowrap"},ge={class:"py-4 px-5 whitespace-nowrap"},fe={class:"py-4 px-5 whitespace-nowrap"},be={class:"py-4 px-5 whitespace-nowrap"},ye={class:"py-4 px-5 whitespace-nowrap flex justify-end"},we={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},ve={class:"font-semibold"},ke={class:"text-white inline-flex bg-gray-400 dark:bg-gray-600 dark:text-gray-400 capitalize rounded px-2"},xe={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Ie={class:"font-semibold"},De={class:"text-sm"},Ae={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Te={class:"py-4 text-gray-900 whitespace-nowrap dark:text-gray-400"},Ve={class:"text-base font-semibold"},Ce={class:"font-normal text-sm"},Ee={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Me={key:0,class:"text-base font-semibold"},Se={class:"relative inline-flex items-center cursor-pointer"},Ye=["onChange","checked"],Le={key:1},je={class:"py-4 px-5 text-gray-900 whitespace-nowrap dark:text-gray-400"},Be={class:"py-4 px-5"},Re={class:"flex gap-2 items-center justify-end"},Fe=["onClick","id"],Ne={key:0,class:"h-6 w-6"},Pe=["href"],Oe=["onClick","id"],Ze={key:1},He={colspan:"7",class:"text-center p-4"},qe={class:"flex justify-center mb-3"};function Ge(e,n,i,f,c,p){const v=s("BreadcrumbLink"),k=s("Breadcrumb"),x=s("badge"),I=s("ExclamationCircleIcon"),u=s("tool-tip"),b=s("global-button"),D=s("page-header"),A=s("global-input"),T=s("MagnifyingGlassIcon"),V=s("a-range-picker"),C=s("tab-filter"),E=s("td-user-show"),M=s("eye-icon"),y=s("Link"),S=s("PencilSquareIcon"),Y=s("envelope-icon"),L=s("ArrowDownTrayIcon"),j=s("trash-icon"),B=s("global-table"),R=s("pagination"),F=s("AppLayout");return d(),w(F,{title:e.__("Invoice List")},{default:l(()=>[r(k,null,{default:l(()=>[r(v,{title:e.__("Recurring Invoice")},null,8,["title"])]),_:1}),t("div",re,[r(D,null,{content:l(()=>[r(b,{loading:!1,url:e.route("invoice.create"),type:"link",theme:"primary",id:"testInvoiceButton"},{default:l(()=>[g(o(e.__("Create Invoice")),1)]),_:1},8,["url"])]),default:l(()=>[t("div",se,[t("span",oe,o(e.__("Recurring Invoice")),1),r(x,null,{default:l(()=>[g(o(i.invoices.total),1)]),_:1}),t("div",ne,[r(I,{class:"sm:w-6 sm:h-6 w-4 h-4 text-red-500 hover:text-red-400"}),r(u,{text:e.__("One time invoices can be found on the transaction page.")},null,8,["text"])])])]),_:1}),t("div",ie,[t("form",{class:"flex sm:flex-wrap sm:flex-row flex-col sm:gap-4 gap-1.5",onSubmit:n[2]||(n[2]=G(a=>p.filterData(),["prevent"]))},[t("div",le,[r(A,{type:"search",modelValue:c.filter.keyword,"onUpdate:modelValue":n[0]||(n[0]=a=>c.filter.keyword=a),class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Invoice No or Recipient Email")},null,8,["modelValue","placeholder"]),t("button",de,[r(T,{class:"w-5 h-5"})])]),t("div",ce,[r(V,{class:U([e.$page.props.errors.date?"border-custom":"","custom-input dark:bg-gray-700 dark:border-gray-700 dark:text-gray-400"]),name:"date","disabled-date":e.disabledDate,placeholder:[e.__("From Invoice Date"),e.__("End Invoice Date")],"disabled-time":e.disabledRangeTime,value:c.date2,"onUpdate:value":n[1]||(n[1]=a=>c.date2=a),format:c.customDateFormat},null,8,["class","disabled-date","placeholder","disabled-time","value","format"])]),t("div",_e,[r(C,{onSetTabData:p.setTabValue,filterData:i.filter_data?i.filter_data.recurring:"",filter_column:"recurring",tab_data:[{title:"All",id:"all",value:"all"},{title:"Recurring",id:"recurring_status_true",value:"recurring_status_true"},{title:"Cancelled",id:"recurring_status_false",value:"recurring_status_false"}]},null,8,["onSetTabData","filterData"])]),t("div",null,[r(b,{loading:c.loading,type:"submit",class:"whitespace-nowrap",theme:"primary"},{default:l(()=>[g(o(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",ue,[r(B,null,{head:l(()=>[t("th",pe,o(e.__("Invoice No")),1),t("th",he,o(e.__("Title"))+" ("+o(e.__("Create Date"))+")",1),t("th",me,o(e.__("Recipient Email")),1),t("th",ge,o(e.__("Total Amount"))+" ("+o(e.__("Due Date"))+")",1),t("th",fe,o(e.__("Recurring")),1),t("th",be,o(e.__("Next Recurring Date")),1),t("th",ye,o(e.__("Action")),1)]),body:l(()=>[i.invoices.data.length>0?(d(!0),_($,{key:0},z(i.invoices.data,a=>(d(),_("tr",{key:a.id,class:"border-b dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"},[t("td",we,[t("div",ve," #"+o(a.invoice_no),1),t("div",ke,o(a.recurring?"recurring":"one time"),1)]),t("td",xe,[t("div",Ie,o(a.title),1),t("div",De,o(a.invoice_date),1)]),t("td",Ae,[r(E,{image:a.user.profile_photo_url,name:a.user.name,email:a.user.email},null,8,["image","name","email"])]),t("td",Te,[t("div",Ve,o(e.convertAmount(e.conversionRate(a.currency,e.$page.props.default_currency,a.items_sum_amount))),1),t("div",Ce,o(a.due_date_format),1)]),t("td",Ee,[a.recurring?(d(),_("div",Me,[t("label",Se,[t("input",{onChange:m=>p.status(m,a.id),checked:a.recurring_status,type:"checkbox",id:"hs-small-switch",class:"sr-only peer"},null,40,Ye),n[3]||(n[3]=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])):(d(),_("div",Le," - "))]),t("td",je,[t("div",null,o(a.next_recurring_date),1)]),t("td",Be,[t("div",Re,[r(y,{href:e.route("invoice.show",a.id),class:"group relative",id:"testInvoiceShow"+a.id},{default:l(()=>[r(M,{class:"text-yellow-400 w-6 h-6 hover:text-yellow-300"}),r(u,{text:e.__("Details")},null,8,["text"])]),_:2},1032,["href","id"]),r(y,{href:e.route("invoice.edit",a.id),class:"group relative",id:"testInvoiceEdit"+a.id},{default:l(()=>[r(S,{class:"text-blue-400 hover:text-blue-300 h-6 w-6"}),r(u,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"]),t("button",{type:"button",onClick:m=>p.sendInvoiceViaEmail(a.id),class:"group relative",id:"testInvoiceSendEmail"+a.id},[c.mail_sending==a.id?(d(),_("div",Ne,n[4]||(n[4]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"}),t("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",class:"spinner_ajPY"})],-1)]))):(d(),w(Y,{key:1,class:"text-green-400 h-6 w-6 hover:text-green-300"})),r(u,{text:e.__("Send Via Email")},null,8,["text"])],8,Fe),t("a",{href:e.route("invoice.download",a.id),class:"group relative",target:"_blank"},[r(L,{class:"text-purple-400 hover:text-purple-300 w-6 h-6"}),r(u,{text:"Download"})],8,Pe),t("button",{type:"button",onClick:m=>p.destroy(a.id),class:"group relative",id:"testInvoiceDelete"+a.id},[r(j,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),r(u,{text:e.__("Delete")},null,8,["text"])],8,Oe)])])]))),128)):(d(),_("tr",Ze,[t("td",He,o(e.__("Nothing Found")),1)]))]),_:1}),t("div",qe,[r(R,{class:"mt-6 mb-4",links:i.invoices.links},null,8,["links"])])])])]),_:1},8,["title"])}const _t=q(ae,[["render",Ge],["__scopeId","data-v-9d34e1a0"]]);export{_t as default};
