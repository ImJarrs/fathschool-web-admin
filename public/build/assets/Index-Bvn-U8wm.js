import{_ as R}from"./AppLayout-D06oZWsy.js";import{T as P}from"./ToolTip-DNh-kznG.js";import{P as T}from"./Pagination-DHbdUHOs.js";import U from"./Show-SOFqsXCw.js";import{_ as G,N as X,r as i,c as C,o as d,w as r,a as s,b as t,e as h,h as f,i as u,t as l,l as x,F as b,j as q}from"./app-B4siR4nP.js";import{r as z}from"./MagnifyingGlassIcon-D3UcIlUc.js";import{r as K}from"./XMarkIcon-BWTnXq2K.js";import{r as H}from"./CheckIcon-CjTfIMhZ.js";import{r as J}from"./EyeIcon-BOU59fVo.js";import{r as Q}from"./PencilSquareIcon-D3Yw7vGl.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";import"./Square3Stack3DIcon-DwnYAGw6.js";const W={components:{AppLayout:R,ToolTip:P,PencilSquareIcon:Q,Pagination:T,EyeIcon:J,CheckIcon:H,XMarkIcon:K,ShowModal:U,MagnifyingGlassIcon:z,NothingFound:X},props:{admission_requests:Array,users:Array,filter_data:Object,classes:Object},data(){return{loading:!1,show_admission:"",visibleAdmission:!1,options:[],options2:[],filter:{keyword:this.filter_data.keyword??null,course:this.filter_data.course??null}}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("student.admission.index"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,n){return n.label.toLowerCase().indexOf(e.toLowerCase())>=0},destroy(e){if(confirm("Are you sure to reject the request?"))this.$inertia.delete(this.route("student.admission.request.reject",e));else return!1},show(e){this.show_admission=e,this.visible=!0},hide(e){this.visible=!1}},created(){this.options.push({value:"",label:"All"});for(const[e,n]of Object.entries(this.classes))this.options.push({value:n.slug,label:n.name})},methods:{destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},destroyAdmission(e){if(confirm("Are you sure to reject the request?"))this.$inertia.delete(this.route("student.admission.request.reject",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},showAdmission(e){this.show_admission=e,this.visibleAdmission=!0},hideAdmission(e){this.visibleAdmission=!1},filterData(){this.loading=!0,this.$inertia.get(this.route("student.admission.index"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,n){return n.label.toLowerCase().indexOf(e.toLowerCase())>=0},sendMail(e){this.$inertia.post(this.route("student.send.mail"),{user:e})}}},Y={class:"flex flex-col sm:flex-row gap-4"},Z={key:0,class:"mb-4"},$={class:"flex col-span-2"},ee={class:"relative w-full"},se={type:"submit",class:"absolute top-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},te={class:"sr-only"},oe={class:"col-span-2"},ie={class:"col-span-1"},ne={class:"py-5 px-5 whitespace-nowrap"},re={class:"py-5 px-5 whitespace-nowrap"},le={class:"py-5 px-5 whitespace-nowrap"},ae={width:"10%",class:"py-5 px-5 whitespace-nowrap"},de={scope:"row",class:"flex items-center py-5 px-5 text-gray-900 whitespace-nowrap dark:text-white"},ue={class:"pl-3"},ce={class:"text-base font-semibold dark:text-gray-400"},he={class:"font-normal text-gray-500 dark:text-gray-400"},me={class:"py-5"},pe={class:"py-5"},_e={class:"py-5 flex gap-2"},fe=["onClick"],be={key:1},ge={colspan:"6",class:"text-center p-4"};function ye(e,n,m,ke,a,c){const I=i("BreadcrumbLink"),S=i("Breadcrumb"),p=i("global-button"),B=i("page-header"),L=i("global-input"),O=i("MagnifyingGlassIcon"),F=i("a-select"),j=i("EyeIcon"),_=i("tool-tip"),g=i("Link"),M=i("CheckIcon"),N=i("XMarkIcon"),D=i("NothingFound"),V=i("global-table"),y=i("a-button"),k=i("show-modal"),v=i("a-modal"),E=i("AppLayout");return d(),C(E,{title:e.__("Student Admission")},{default:r(()=>[s(S,null,{default:r(()=>[s(I,{title:e.__("Student Admission")},null,8,["title"])]),_:1}),t("div",null,[s(B,{class:"flex-col sm:flex-row"},{content:r(()=>[t("div",Y,[e.can("bulk.admission")?(d(),C(p,{key:0,"preserve-scroll":"",loading:!1,url:e.route("student.bulk.admission"),type:"link",theme:"secondary"},{default:r(()=>[u(l(e.__("Bulk Admission")),1)]),_:1},8,["url"])):f("",!0),s(p,{loading:!1,"preserve-scroll":"",type:"link",url:e.route("student.admission.create"),theme:"primary"},{default:r(()=>[u(l(e.__("New Admission")),1)]),_:1},8,["url"])])]),default:r(()=>[u(l(e.__("Student Admission Request"))+" ",1)]),_:1}),m.admission_requests.length>0?(d(),h("div",Z,[t("form",{class:"items-center grid grid-cols-1 md:grid-cols-7 gap-6",onSubmit:n[2]||(n[2]=x(o=>c.filterData(),["prevent"]))},[t("div",$,[t("div",ee,[s(L,{type:"search",modelValue:a.filter.keyword,"onUpdate:modelValue":n[0]||(n[0]=o=>a.filter.keyword=o),class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",se,[s(O,{class:"w-5 h-5"}),t("span",te,l(e.__("Search")),1)])])]),t("div",oe,[s(F,{size:"large",class:"width-100",value:a.filter.course,"onUpdate:value":n[1]||(n[1]=o=>a.filter.course=o),"show-search":"",placeholder:e.__("Select a course"),options:a.options,"filter-option":c.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","filter-option","onFocus","onBlur","onChange"])]),t("div",ie,[s(p,{loading:a.loading,type:"submit",theme:"primary"},{default:r(()=>[u(l(e.__("Search")),1)]),_:1},8,["loading"])])],32)])):f("",!0),s(V,null,{head:r(()=>[t("th",ne,l(e.__("Student")),1),t("th",re,l(e.__("Parent Email")),1),t("th",le,l(e.__("Course")),1),t("th",ae,l(e.__("Action")),1)]),body:r(()=>[m.admission_requests.length>0?(d(!0),h(b,{key:0},q(m.admission_requests,o=>(d(),h("tr",{key:o.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("th",de,[t("div",ue,[t("div",ce,l(o.name),1),t("div",he,l(o.email),1)])]),t("td",me,l(o.guardian_email),1),t("td",pe,[(d(!0),h(b,null,q(o.course_names,(w,A)=>(d(),h("div",{key:A,class:"font-bold ml-0.5"},[u(l(w)+" ",1),o.course_names.length!=A+1?(d(),h(b,{key:0},[u(",")],64)):f("",!0)]))),128))]),t("td",_e,[s(g,{href:e.route("student.admission.show",o.id),class:"group relative"},{default:r(()=>[s(j,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),s(_,{text:e.__("Details Request")},null,8,["text"])]),_:2},1032,["href"]),s(g,{href:e.route("student.admission.request.accept",o.id),class:"group relative"},{default:r(()=>[s(M,{class:"w-6 h-6 text-blue-500 hover:text-blue-300"}),s(_,{text:e.__("Accept Request")},null,8,["text"])]),_:2},1032,["href"]),t("button",{type:"button",onClick:x(w=>c.destroyAdmission(o.id),["prevent"]),class:"group relative"},[s(N,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),s(_,{text:e.__("Reject Request")},null,8,["text"])],8,fe)])]))),128)):(d(),h("tr",be,[t("td",ge,[s(D,{asShow:"div"})])]))]),_:1})]),s(v,{visible:e.visible,"onUpdate:visible":n[3]||(n[3]=o=>e.visible=o),title:"Admission Details",onOk:c.hide},{footer:r(()=>[s(y,{key:"back",onClick:c.hide},{default:r(()=>[u(l(e.__("Close")),1)]),_:1},8,["onClick"])]),default:r(()=>[s(k,{admission:a.show_admission},null,8,["admission"])]),_:1},8,["visible","onOk"]),s(v,{visible:a.visibleAdmission,"onUpdate:visible":n[4]||(n[4]=o=>a.visibleAdmission=o),title:"Admission Details",onOk:c.hideAdmission},{footer:r(()=>[s(y,{key:"back",onClick:c.hideAdmission},{default:r(()=>[u(l(e.__("Close")),1)]),_:1},8,["onClick"])]),default:r(()=>[s(k,{admission:a.show_admission},null,8,["admission"])]),_:1},8,["visible","onOk"])]),_:1},8,["title"])}const Re=G(W,[["render",ye]]);export{Re as default};
