import{_ as w}from"./AppLayout-D06oZWsy.js";import{s as S}from"./multiselect-BtWcUH1S.js";import{_ as C,f as b,r as d,c as L,o as u,w as m,a as l,b as s,t as c,i as y,l as A,e as p,h as _,m as M,H as R,F as B,j as T}from"./app-B4siR4nP.js";/* empty css                                                         */import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const U={props:{types:Array,templates:Array,roles:Array,courses:Array,filter_data:Object,users:Array},components:{AppLayout:w,Multiselect:S,useForm:b.useForm},data(){return{loading:!1,text:"Send SMS",form:b.useForm({type_id:this.filter_data.type_id??"",role_id:this.filter_data.role_id??"",user_id:this.filter_data.user_id??"",message:this.filter_data.message??"",course_id:this.filter_data.course_id??"",individualRole_id:this.filter_data.individualRole_id??""}),maxLength:320,uniqueKey:{name:"{name}",email:"{email}",phone:"{phone}"}}},watch:{"form.individualRole_id":function(r){r&&this.filterData()}},methods:{insertValue(r){this.form.message+=this.uniqueKey[r]},filterData(){this.form.get(this.route("sms.index"))},submit(){this.$inertia.post(this.route("sms.send"),this.form,{preserveScroll:!0,onSuccess:()=>{this.reset()},onFinish:r=>{this.loading=!1}})},reset(){this.form.type_id="",this.form.template_message="",this.form.role_id="",this.form.user_id="",this.form.message="",this.form.course_id="",this.form.individualRole_id=""}},computed:{remainingCharacters(){return this.maxLength-this.form.message.length}}},F={class:"mx-auto pb-12"},D={class:"rounded-lg flex justify-between items-center mb-4 py-4 px-6 text-lg font-semibold rtl:text-right text-left text-gray-900 bg-white dark:text-white dark:bg-gray-800"},q={class:"dark:text-gray-400"},N={class:"rounded-lg"},j={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},K={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},E={class:"mb-3"},H={class:"col-span-2"},I={class:"mb-3"},O={class:"col-span-2"},z={class:"w-full bg-white rounded-lg border border-gray-200 p-4 dark:bg-gray-800 dark:border-gray-700"},G={class:"mb-3"},J={key:0,class:"col-span-2"},P={key:1,class:"col-span-2"},Q={class:"grid sm:grid-cols-1 md:grid-cols-2 sm:gap-1 md:gap-4"},W={class:"col-span-1"},X={class:"col-span-1"},Y={key:2,class:"col-span-2"},Z={class:"mb-1"},$=["placeholder"],ee={class:"text-right"},oe=["onClick"];function se(r,t,a,te,o,f){const v=d("BreadcrumbLink"),k=d("Breadcrumb"),g=d("global-button"),x=d("Link"),i=d("global-label"),n=d("Multiselect"),V=d("AppLayout");return u(),L(V,{title:r.__(o.text)},{default:m(()=>[l(k,null,{default:m(()=>[l(v,{title:o.text},null,8,["title"])]),_:1}),s("div",F,[s("div",D,[s("div",q,c(r.__(o.text)),1),l(x,{"preserve-scroll":"",href:r.route("sms.template.index")},{default:m(()=>[l(g,{loading:!1,type:"button",theme:"primary"},{default:m(()=>[y(c(r.__("Message Template")),1)]),_:1})]),_:1},8,["href"])]),s("div",N,[s("form",{onSubmit:t[7]||(t[7]=A((...e)=>f.submit&&f.submit(...e),["prevent"]))},[s("div",j,[s("div",K,[s("div",E,[s("div",H,[l(i,{for:"class",value:"Type"}),l(n,{id:"class",class:"dark:text-gray-900",modelValue:o.form.type_id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.type_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:r.__("Select Type"),options:a.types.map(e=>({value:e.id,label:e.type})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])]),s("div",I,[s("div",O,[l(i,{for:"class",value:"Template"}),l(n,{id:"class",class:"dark:text-gray-900",modelValue:o.form.message,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.message=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:r.__("Select A Template"),options:a.templates.map(e=>({value:e.message,label:e.title})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])])]),s("div",z,[s("div",G,[o.form.type_id==2?(u(),p("div",J,[l(i,{for:"role",value:"Role"}),l(n,{id:"role",class:"dark:text-gray-900",modelValue:o.form.role_id,"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.role_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:r.__("Select Course"),options:a.roles.map(e=>({value:e.name,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])):_("",!0),o.form.type_id==3?(u(),p("div",P,[s("div",Q,[s("div",W,[l(i,{for:"role",value:"Role"}),l(n,{id:"role",class:"dark:text-gray-900",modelValue:o.form.individualRole_id,"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.individualRole_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:r.__("Select Course"),options:a.roles.map(e=>({value:e.name,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),s("div",X,[l(i,{for:"users",value:"Send to"}),l(n,{id:"users",class:"dark:text-gray-900",modelValue:o.form.user_id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.form.user_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:r.__("Select User"),options:o.form.individualRole_id==="Student"?a.users.map(e=>({value:e.user_id,label:e.student_id})):a.users.map(e=>({value:e.id,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])])])):_("",!0),o.form.type_id==4?(u(),p("div",Y,[l(i,{for:"Course",value:"Course"}),l(n,{id:"Course",class:"dark:text-gray-900",modelValue:o.form.course_id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.form.course_id=e),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:r.__("Select Course"),options:a.courses.map(e=>({value:e.id,label:e.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])])):_("",!0)]),s("div",Z,[l(i,{for:"message",value:"Message",required:!1}),M(s("textarea",{rows:"4","onUpdate:modelValue":t[6]||(t[6]=e=>o.form.message=e),name:"",placeholder:r.__("Message"),id:"description",maxlength:"320",class:"pl-4 bg-gray-50 border rounded-lg border-gray-300 text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},"                                ",8,$),[[R,o.form.message]]),s("p",ee,c(f.remainingCharacters)+" characters remaining",1),t[8]||(t[8]=s("b",null,"Dynamic Tag :",-1)),(u(!0),p(B,null,T(o.uniqueKey,(e,h)=>(u(),p("button",{key:h,type:"button",class:"bg-transparent border border-gray-700 text-gray-700 dark:border-gray-300 dark:text-gray-300 mx-1 px-2 py-1 rounded-lg",onClick:le=>f.insertValue(h)},c(e),9,oe))),128))])])]),l(g,{loading:o.form.processing,type:"submit",cssClass:"w-full mt-3",theme:"primary"},{default:m(()=>[y(c(r.__("Send")),1)]),_:1},8,["loading"])],32)])])]),_:1},8,["title"])}const he=C(U,[["render",se]]);export{he as default};
