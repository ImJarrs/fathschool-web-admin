import{e as h,o as s,b as o,_ as H,N as K,r as a,c as p,w as l,a as r,F as w,j as x,t as i,i as b,h as q,l as X,n as A,s as Y,f as T}from"./app-R3TKzMFz.js";import{_ as $}from"./AppLayout-pRkTteQX.js";import{T as J}from"./ToolTip-BDAKiZ28.js";import{P as Q}from"./Pagination-BOIqYq_w.js";import W from"./Show-vppBccCt.js";import{s as ee}from"./multiselect-S7NpFuS0.js";/* empty css                */import{T as te}from"./TdUserShow-2NeczW4c.js";import{_ as re}from"./Modal-BLSUD_Cv.js";import{r as oe}from"./MagnifyingGlassIcon-BrVlPJ1Z.js";import{r as ae}from"./Square2StackIcon-BpZqBSLV.js";import{r as le}from"./EyeIcon-CK2ADUCC.js";import{r as se}from"./PencilSquareIcon-CBvao7ks.js";import{b as ne}from"./TopBarMenu-CcNsgK0k.js";import{r as ie}from"./TrashIcon-bv6UB_hV.js";import"./index-KXBnMdcv.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./Bars3Icon-BbGKyUny.js";import"./XMarkIcon-8_3jvOSV.js";function de(t,n){return s(),h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}const ce={components:{AppLayout:$,ToolTip:J,TrashIcon:ie,UsersIcon:ne,PencilSquareIcon:se,Pagination:Q,UserGroupIcon:de,TdUserShow:te,EyeIcon:le,Square2StackIcon:ae,MagnifyingGlassIcon:oe,ShowModal:W,Multiselect:ee,NothingFound:K,ExportModal:re},props:{users:Object,admins:Number,parents:Number,students:Number,teachers:Number,administrations:Number,others:Number,query:Object},data(){return{visible:!1,show_user:"",export_data:T.useForm({type:"Excel",course:"all"}),filter:T.useForm({keyword:this.query.keyword??"",query:this.query.query??"all"}),stats:[{data:this.admins,title:"Total Admins",query:"admin"},{data:this.parents,title:"Total Parents",query:"parent"},{data:this.students,title:"Total Students",query:"student"},{data:this.teachers,title:"Total Teachers",query:"teacher"},{data:this.administrations,title:"Total Administrations",query:"administration"},{data:this.others,title:"Others",query:"other"}]}},methods:{accountManual(t,n){let d=t.target.checked;this.$inertia.post(this.route("user.account.manual",n),{status:d},{preserveScroll:!0})},destroy(t){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",t));else return!1},show(t){this.show_user=t,this.visible=!0},hide(t){this.visible=!1},filterData(){this.filter.get(this.route("users.index"),{preserveScroll:!0})},updateStatus(t,n){let d=t.target.checked;this.$inertia.post(this.route("user.status.update",n),{status:d},{preserveScroll:!0})},exportSubmit(){this.loading=!0;let t={};this.filter.query!==""&&(t.query=this.filter.query),Y({url:this.route("all.user.export"),method:"POST",data:{...this.export_data,...t},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(n=>{console.log("asdjiwfuqhiqjdqwjdoiwqjdiow"),this.export_data.type;var d=window.URL.createObjectURL(new Blob([n.data])),g=document.createElement("a");g.href=d,g.setAttribute("download","allteacher-report.xlsx"),document.body.appendChild(g),g.click(),this.loading=!1,this.visible=!1}).catch(n=>{this.loading=!1,this.visible=!1})}}},ue={class:"flex gap-6 flex-wrap lg:flex-nowrap w-full mb-3"},pe={class:"p-3 text-blue-600 bg-blue-100 dark:bg-blue-500/20 rounded-full"},he={class:"text-2xl mb-0 font-medium text-gray-900 dark:text-gray-400"},me={class:"text-sm mb-0 text-gray-400"},fe={class:"mb-3"},_e={class:"flex col-span-4"},be={class:"relative w-full"},ge={type:"submit",class:"absolute top-6 rtl:left-0 rtl:right-auto right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rtl:rounded-r-0 rtl:rounded-l-lg rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ye={class:"col-span-4 mt-0.5"},ke={class:"col-span-1 md:mt-5"},ve={class:"py-4 px-5"},we={class:"py-4 px-5"},xe={class:"py-4 px-5"},Se={class:"py-4 px-5"},qe={width:"10%",class:"py-4 px-5"},Ae={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},Te={class:"py-4 px-5"},Ce={class:"text-xs mt-1"},Ne={class:"py-4 px-5"},Ie={key:0,class:"text-red-500 block"},Ue={key:1,class:"relative inline-flex items-center cursor-pointer"},je=["disabled","onChange","checked"],Me={class:"py-4 px-5"},Ve={class:"relative inline-flex items-center cursor-pointer"},Le=["onChange","checked"],Be={class:"py-4 px-5"},Ee={class:"flex gap-2"},Oe=["onClick","id"],Pe={class:"inline-flex dark:text-gray-400 absolute z-10 -top-4 -right-2 justify-center items-center w-6 h-6 text-xs font-bold text-white bg-red-500 rounded-full border-2 border-white dark:border-gray-900"},Fe=["onClick","id"],Re={class:"flex justify-center"};function Ge(t,n,d,g,c,_){const C=a("BreadcrumbLink"),N=a("Breadcrumb"),I=a("UserGroupIcon"),m=a("Link"),U=a("badge"),y=a("global-button"),j=a("page-header"),S=a("global-label"),M=a("global-input"),V=a("MagnifyingGlassIcon"),L=a("Multiselect"),B=a("td-user-show"),k=a("eye-icon"),f=a("tool-tip"),v=a("PencilSquareIcon"),E=a("Square2StackIcon"),O=a("trash-icon"),P=a("NothingFound"),F=a("global-table"),R=a("pagination"),G=a("a-button"),D=a("show-modal"),Z=a("a-modal"),z=a("AppLayout");return s(),p(z,{title:t.__("Users")},{default:l(()=>[r(N,null,{default:l(()=>[r(C,{title:t.__("Users")},null,8,["title"])]),_:1}),o("div",null,[o("div",ue,[(s(!0),h(w,null,x(c.stats,(e,u)=>(s(),p(m,{key:u,"preserve-scroll":"",href:t.route("users.index",{query:e.query}),class:"hover:bg-gray-50 shadow-sm flex items-center w-64 flex-grow gap-4 p-6 bg-white border border-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-800 rounded-lg",id:"test_"+e.query},{default:l(()=>[o("span",pe,[r(I,{class:"w-6 h-6"})]),o("div",null,[o("h3",he,i(e.data),1),o("p",me,i(e.title),1)])]),_:2},1032,["href","id"]))),128))]),r(j,null,{content:l(()=>[t.term?(s(),p(m,{key:0,"preserve-scroll":"",href:t.route("users.index")},{default:l(()=>[r(y,{loading:!1,type:"button",class:"text-white bg-pink-500 dark:bg-pink-500 hover:bg-pink-400 active:bg-pink-600 dark:active:bg-pink-600 focus:border-pink-600 dark:focus:border-pink-600 focus:ring focus:ring-pink-300 dark:focus:ring-pink-300"},{default:l(()=>[b(i(t.__("All User")),1)]),_:1})]),_:1},8,["href"])):q("",!0),r(y,{"preserve-scroll":"",loading:!1,type:"link",cssClass:"ml-2",url:t.route("users.create"),theme:"primary"},{default:l(()=>[b(i(t.__("Create User")),1)]),_:1},8,["url"])]),default:l(()=>[b(i(t.__("All User"))+" ",1),r(U,null,{default:l(()=>[b(i(d.users.total),1)]),_:1})]),_:1}),o("div",fe,[o("form",{class:"items-center grid grid-cols-1 md:grid-cols-9 gap-6",onSubmit:n[2]||(n[2]=X(e=>_.filterData(),["prevent"]))},[o("div",_e,[o("div",be,[r(S,{for:"name",value:"Search Here",required:!1}),r(M,{type:"search",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:t.__("Name, Email or Role"),modelValue:c.filter.keyword,"onUpdate:modelValue":n[0]||(n[0]=e=>c.filter.keyword=e)},null,8,["placeholder","modelValue"]),o("button",ge,[r(V,{class:"w-5 h-5"})])])]),o("div",ye,[r(S,{for:"name",value:"Select Role",required:!1}),r(L,{"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,modelValue:c.filter.query,"onUpdate:modelValue":n[1]||(n[1]=e=>c.filter.query=e),placeholder:t.__("Select a role"),options:[{label:"All",value:"all"},{label:"Admins",value:"Admin"},{label:"Parents",value:"Parent"},{label:"Admission",value:"Student"},{label:"Teachers",value:"Teacher"},{label:"Administrations",value:"Administration"},{label:"Accountant",value:"Other"}],autocomplete:"off"},null,8,["modelValue","placeholder"])]),o("div",ke,[r(y,{loading:c.filter.processing,type:"submit",theme:"primary"},{default:l(()=>[b(i(t.__("Search")),1)]),_:1},8,["loading"])])],32)]),r(F,null,{head:l(()=>[o("th",ve,i(t.__("Name")),1),o("th",we,i(t.__("Role")),1),o("th",xe,i(t.__("Active/Ban")),1),o("th",Se,i(t.__("Manual Attendance")),1),o("th",qe,i(t.__("Action")),1)]),body:l(()=>[d.users.data.length>0?(s(!0),h(w,{key:0},x(d.users.data,e=>(s(),h("tr",{key:e.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[o("td",Ae,[r(B,{image:e.profile_photo_url,name:e.name,email:e.email},null,8,["image","name","email"])]),o("td",Te,[o("div",null,[(s(!0),h(w,null,x(e.roles,u=>(s(),h("span",{key:u.id,class:"bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},i(u.name),1))),128))]),o("div",Ce,i(e.join_date),1)]),o("td",Ne,[e.role=="Admin"&&e.id==t.$page.props.auth.id?(s(),h("small",Ie,i(t.__("You cant ban yourself")),1)):(s(),h("label",Ue,[o("input",{disabled:e.role=="Admin"&&e.id==t.$page.props.auth.id,onChange:u=>_.updateStatus(u,e.id),checked:e.status,type:"checkbox",class:A(["sr-only peer",e.role=="Admin"&&e.id==t.$page.props.auth.id?"cursor-not-allowed":""])},null,42,je),o("div",{class:A([e.role=="Admin"&&e.id==t.$page.props.auth.id?"opacity-50":"","w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"])},null,2)]))]),o("td",Me,[o("label",Ve,[o("input",{onChange:u=>_.accountManual(u,e.id),checked:e.manual,type:"checkbox",class:"sr-only peer"},null,40,Le),n[4]||(n[4]=o("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),o("td",Be,[o("div",Ee,[e.role=="Student"?(s(),p(m,{key:0,"preserve-scroll":"",href:t.route("student.show",e.username),class:"group relative",id:"show"+e.id},{default:l(()=>[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(f,{text:t.__("View")},null,8,["text"])]),_:2},1032,["href","id"])):e.role=="Teacher"?(s(),p(m,{key:1,"preserve-scroll":"",href:t.route("teacher.show",e.id),class:"group relative",id:"show"+e.id},{default:l(()=>[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(f,{text:t.__("View")},null,8,["text"])]),_:2},1032,["href","id"])):(s(),h("button",{key:2,type:"button",onClick:u=>_.show(e),class:"group relative",id:"show"+e.id},[r(k,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),r(f,{text:t.__("View")},null,8,["text"])],8,Oe)),e.role=="Student"?(s(),p(m,{key:3,"preserve-scroll":"",href:t.route("student.admission.edit",e.id),class:"group relative",id:"edit"+e.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(f,{text:t.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])):e.role=="Teacher"?(s(),p(m,{key:4,"preserve-scroll":"",href:t.route("teachers.edit",e.id),class:"group relative",id:"edit"+e.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(f,{text:t.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])):(s(),p(m,{key:5,"preserve-scroll":"",href:t.route("users.edit",e.id),class:"group relative",id:"edit"+e.id},{default:l(()=>[r(v,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),r(f,{text:t.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"])),e.role=="Teacher"?(s(),p(m,{key:6,"preserve-scroll":"",href:t.route("teacher.classes",e.id),class:"group relative cursor-pointer",id:"teacherSubject"+e.id},{default:l(()=>[r(E,{class:"w-6 h-6 text-purple-400 hover:text-purple-300"}),r(f,{text:t.__("Subjects")},null,8,["text"]),o("div",Pe,i(e.subjects_count),1)]),_:2},1032,["href","id"])):q("",!0),o("button",{type:"button",onClick:u=>_.destroy(e.id),class:"group relative",id:"delete"+e.id},[r(O,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),r(f,{text:t.__("Delete")},null,8,["text"])],8,Fe)])])]))),128)):(s(),p(P,{key:1,asShow:"tr"}))]),_:1}),o("div",Re,[r(R,{class:"mt-6 mb-6",links:d.users.links},null,8,["links"])])]),r(Z,{visible:c.visible,"onUpdate:visible":n[3]||(n[3]=e=>c.visible=e),title:c.show_user.name,onOk:_.hide},{footer:l(()=>[r(G,{key:"back",onClick:_.hide},{default:l(()=>[b(i(t.__("Close")),1)]),_:1},8,["onClick"])]),default:l(()=>[r(D,{user:c.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const ut=H(ce,[["render",Ge]]);export{ut as default};
