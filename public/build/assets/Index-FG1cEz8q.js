import{_ as U,N as V,r as n,c as P,o as f,w as a,a as o,b as t,i as p,t as l,l as q,e as b,F as R,j as Y,s as G,f as H}from"./app-R3TKzMFz.js";import{r as K,_ as z}from"./AppLayout-pRkTteQX.js";import{T as J}from"./ToolTip-BDAKiZ28.js";import{P as X}from"./Pagination-BOIqYq_w.js";import{T as Q}from"./TdUserShow-2NeczW4c.js";import{_ as W}from"./Modal-BLSUD_Cv.js";import{r as Z}from"./MagnifyingGlassIcon-BrVlPJ1Z.js";import{r as $}from"./Square2StackIcon-BpZqBSLV.js";import{r as ee}from"./EyeIcon-CK2ADUCC.js";import{r as te}from"./PencilSquareIcon-CBvao7ks.js";import{r as oe}from"./TrashIcon-bv6UB_hV.js";import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./XMarkIcon-8_3jvOSV.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";const re={components:{AppLayout:z,ToolTip:J,TdUserShow:Q,TrashIcon:oe,PencilSquareIcon:te,Pagination:X,EyeIcon:ee,Square2StackIcon:$,MagnifyingGlassIcon:Z,EnvelopeIcon:K,NothingFound:V,ExportModal:W},props:{users:Object,filter_data:Object,departments:Object},data(){return{loading:!1,options:[],options2:[],visible:!1,show_user:"",filter:{keyword:this.filter_data.keyword??null,course:this.filter_data.course??null,department:this.filter_data.department??null},export_data:H.useForm({type:"Excel",course:"all"})}},created(){this.options2.push({value:"",label:"All"});for(const[e,r]of Object.entries(this.departments))this.options2.push({value:r.slug,label:r.name})},methods:{accountHold(e,r){let i=e.target.checked;this.$inertia.post(this.route("user.account.hold",r),{status:i},{preserveScroll:!0})},accountManual(e,r){let i=e.target.checked;this.$inertia.post(this.route("user.account.manual",r),{status:i},{preserveScroll:!0})},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("users.destroy",e));else return!1},show(e){this.show_user=e,this.visible=!0},hide(e){this.visible=!1},filterData(){this.loading=!0,this.$inertia.get(this.route("administrations.index"),this.filter,{preserveScroll:!0,onSuccess:()=>{},onFinish:e=>{this.loading=!1}})},filterOption(e,r){return r.label.toLowerCase().indexOf(e.toLowerCase())>=0},sendMail(e){this.$inertia.post(this.route("administration.send.mail"),{user:e})},exportSubmit(){this.loading=!0;let e={};this.filter.department!==""&&(e.departement=this.filter.department),G({url:this.route("all.administration.export"),method:"POST",data:{...this.export_data,...e},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(r=>{this.export_data.type;var i=window.URL.createObjectURL(new Blob([r.data])),u=document.createElement("a");u.href=i,u.setAttribute("download","alladministration-report.xlsx"),document.body.appendChild(u),u.click(),this.loading=!1,this.visible=!1}).catch(r=>{this.loading=!1,this.visible=!1})}}},se={class:"flex flex-col sm:flex-row gap-4"},ne={class:"mb-4"},ae={class:"md:col-span-3"},le={class:"relative w-full"},ie={type:"submit",class:"absolute top-0 right-0 p-2.5 text-sm font-medium text-white bg-blue-700 rounded-r-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},de={class:"md:col-span-3"},ce={class:"md:col-span-1"},pe={class:"py-4 px-5"},ue={class:"py-4 px-5"},he={class:"py-4 px-5"},_e={class:"py-4 px-5"},me={class:"py-4 px-5"},fe={width:"10%",class:"py-4 px-5"},be={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},ge={class:"py-4 px-5"},ye={class:"py-4 px-5"},ke={class:"py-4 px-5"},ve={class:"relative inline-flex items-center cursor-pointer"},we=["onChange","checked"],xe={class:"py-4 px-5"},Ce={class:"relative inline-flex items-center cursor-pointer"},Se=["onChange","checked"],Ae={class:"py-4 px-5"},Le={class:"flex gap-2"},Me=["onClick"],Ie=["onClick","id"],Be={key:1},Ee={colspan:"4",class:"text-center p-4"},Oe={class:"flex justify-center"};function Fe(e,r,i,u,d,c){const y=n("BreadcrumbLink"),k=n("Breadcrumb"),v=n("badge"),_=n("global-button"),w=n("page-header"),x=n("global-input"),C=n("MagnifyingGlassIcon"),S=n("a-select"),A=n("td-user-show"),L=n("EnvelopeIcon"),m=n("tool-tip"),M=n("eye-icon"),g=n("Link"),I=n("PencilSquareIcon"),B=n("trash-icon"),E=n("NothingFound"),O=n("global-table"),F=n("pagination"),T=n("a-button"),N=n("show-modal"),j=n("a-modal"),D=n("AppLayout");return f(),P(D,{title:e.__("Administration List")},{default:a(()=>[o(k,null,{default:a(()=>[o(y,{title:e.__("Administration List")},null,8,["title"])]),_:1}),t("div",null,[o(w,null,{content:a(()=>[t("div",se,[o(_,{loading:!1,onClick:r[0]||(r[0]=s=>c.exportSubmit()),type:"button",theme:"sky"},{default:a(()=>[p(l(e.__("Export")),1)]),_:1}),o(_,{"preserve-scroll":"",loading:!1,url:e.route("administration.import"),type:"link",theme:"secondary"},{default:a(()=>[p(l(e.__("Import")),1)]),_:1},8,["url"]),o(_,{url:e.route("administrations.create"),type:"link",theme:"primary"},{default:a(()=>[p(l(e.__("Add Administrations")),1)]),_:1},8,["url"])])]),default:a(()=>[p(l(e.__("All Administrations"))+" ",1),o(v,null,{default:a(()=>[p(l(i.users.total),1)]),_:1})]),_:1}),t("div",ne,[t("form",{class:"items-center grid grid-cols-1 md:grid-cols-7 md:gap-6 gap-1.5",onSubmit:r[3]||(r[3]=q(s=>c.filterData(),["prevent"]))},[t("div",ae,[t("div",le,[o(x,{type:"search",modelValue:d.filter.keyword,"onUpdate:modelValue":r[1]||(r[1]=s=>d.filter.keyword=s),class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",ie,[o(C,{class:"w-5 h-5"})])])]),t("div",de,[o(S,{size:"large",class:"width-100",value:d.filter.department,"onUpdate:value":r[2]||(r[2]=s=>d.filter.department=s),"show-search":"",placeholder:e.__("Select a department"),options:d.options2,"filter-option":c.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","filter-option","onFocus","onBlur","onChange"])]),t("div",ce,[o(_,{loading:d.loading,type:"submit",theme:"primary",class:"w-full"},{default:a(()=>[p(l(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),o(O,null,{head:a(()=>[t("th",pe,l(e.__("Name")),1),t("th",ue,l(e.__("Department")),1),t("th",he,l(e.__("Joined at")),1),t("th",_e,l(e.__("Account Hold")),1),t("th",me,l(e.__("Manual Attendance")),1),t("th",fe,l(e.__("Action")),1)]),body:a(()=>[i.users.data.length>0?(f(!0),b(R,{key:0},Y(i.users.data,s=>(f(),b("tr",{key:s.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",be,[o(A,{image:s.profile_photo_url,name:s.name,email:s.email},null,8,["image","name","email"])]),t("td",ge,l(s.department?s.department.name:"-"),1),t("td",ye,l(e.formatTime(s.created_at,"MMMM D, YYYY")),1),t("td",ke,[t("label",ve,[t("input",{onChange:h=>c.accountHold(h,s.id),checked:s.account_hold,type:"checkbox",class:"sr-only peer"},null,40,we),r[5]||(r[5]=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),t("td",xe,[t("label",Ce,[t("input",{onChange:h=>c.accountManual(h,s.id),checked:s.manual,type:"checkbox",class:"sr-only peer"},null,40,Se),r[6]||(r[6]=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),t("td",Ae,[t("div",Le,[t("button",{onClick:h=>c.sendMail(s.id),type:"button",class:"group relative"},[o(L,{class:"text-purple-400 hover:text-purple-300"}),o(m,{text:e.__("Send Mail")},null,8,["text"])],8,Me),o(g,{"preserve-scroll":"",href:e.route("administration.show",s.id),class:"group relative"},{default:a(()=>[o(M,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),o(m,{text:e.__("View")},null,8,["text"])]),_:2},1032,["href"]),o(g,{"preserve-scroll":"",href:e.route("administrations.edit",s.id),class:"group relative",id:"edit"+s.id},{default:a(()=>[o(I,{class:"text-blue-400 w-6 h-6 hover:text-blue-300"}),o(m,{text:e.__("Edit")},null,8,["text"])]),_:2},1032,["href","id"]),t("button",{type:"button",onClick:h=>c.destroy(s.id),class:"group relative",id:"delete"+s.id},[o(B,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),o(m,{text:e.__("Delete")},null,8,["text"])],8,Ie)])])]))),128)):(f(),b("tr",Be,[t("td",Ee,[o(E,{asShow:"div"})])]))]),_:1}),t("div",Oe,[o(F,{class:"mt-6",links:i.users.links},null,8,["links"])])]),o(j,{visible:d.visible,"onUpdate:visible":r[4]||(r[4]=s=>d.visible=s),title:d.show_user.name,onOk:c.hide},{footer:a(()=>[o(T,{key:"back",onClick:c.hide},{default:a(()=>[p(l(e.__("Close")),1)]),_:1},8,["onClick"])]),default:a(()=>[o(N,{user:d.show_user},null,8,["user"])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const $e=U(re,[["render",Fe]]);export{$e as default};
