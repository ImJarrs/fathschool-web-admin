import{r as S,_ as A}from"./AppLayout-D06oZWsy.js";import{_ as L,N as R,r as s,c as v,o as d,w as l,a as o,b as a,e as f,i as u,t as i,F as V,j as q}from"./app-B4siR4nP.js";import{s as M}from"./multiselect-BtWcUH1S.js";/* empty css                */import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const O={components:{AppLayout:A,EnvelopeIcon:S,NothingFound:R,Multiselect:M},props:{results:{type:Array,required:!0},exams:{type:Array,required:!0}},data(){return{visible:!1,loading:!1,update:!1,form:this.$inertia.form({exam:"",attachment:"",id:""})}},methods:{showModal(){this.visible=!0},handleOk(){this.visible=!1,this.update=!1,this.form.id="",this.form.exam="",this.form.attachment=""},onFileChange(e){const n=e.target.files[0];this.form.attachment=n},editData(e){this.update=!0,this.form.id=e.id,this.form.exam=e.exam_id,this.visible=!0},submit(){this.update?this.form.post(this.route("result.update",this.form.id),{onSuccess:e=>{this.form.exam="",this.form.attachment="",this.form.id="",this.form.reset(),this.visible=!1}}):this.form.post(this.route("result.store"),{onSuccess:e=>{this.form.exam="",this.form.attachment="",this.form.id="",this.form.reset(),this.visible=!1}})}}},D={key:0},j={class:"mt-2 ml-4 mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between"},T={class:"text-sm text-neutral-500"},I={class:"mb-1.5 text-xl font-semibold"},P={class:"flex gap-2 items-center"},U=["href"],z={class:"flex gap-2"},G={class:"dark:bg-gray-800 rounded-lg"},H={class:"mb-3"},J={class:"flex justify-between font-bold text-xs ml-1 dark:text-gray-400 mt-0.5"},K={href:"/files/result.xlsx",download:""};function Q(e,n,c,W,r,m){const y=s("BreadcrumbLink"),k=s("Breadcrumb"),p=s("global-button"),w=s("page-header"),C=s("NothingFound"),h=s("global-label"),E=s("Multiselect"),_=s("input-error"),B=s("global-input"),F=s("a-modal"),N=s("AppLayout");return d(),v(N,{title:e.__("Exam & Results")},{default:l(()=>[o(k,null,{default:l(()=>[o(y,{title:e.__("Exam & Results")},null,8,["title"])]),_:1}),a("div",null,[o(w,null,{content:l(()=>[o(p,{loading:!1,type:"button",onClick:n[0]||(n[0]=t=>m.showModal()),theme:"primary"},{default:l(()=>[u(i(e.__("Publish New Result")),1)]),_:1})]),default:l(()=>[u(i(e.__("Exam & Results"))+" ",1)]),_:1}),c.results&&c.results.length?(d(),f("ol",D,[(d(!0),f(V,null,q(c.results,t=>{var b,g,x;return d(),f("li",{class:"p-2 bg-white dark:bg-gray-800 mt-2",key:t.id},[a("div",j,[a("div",null,[a("p",T,i(e.formatTime((b=t==null?void 0:t.exam)==null?void 0:b.start_date)??"")+" - "+i(e.formatTime((g=t==null?void 0:t.exam)==null?void 0:g.end_date)??""),1),a("h4",I,i(((x=t==null?void 0:t.exam)==null?void 0:x.name)??""),1)]),a("div",P,[a("a",{href:t.attachment_url,download:""},[o(p,{type:"submit",class:"text-white bg-gray-500 dark:bg-gray-500 hover:bg-gray-500"},{default:l(()=>[u(i(e.__("Download Sheets")),1)]),_:1})],8,U)])])])}),128))])):(d(),v(C,{key:1,asShow:"div"}))]),o(F,{visible:r.visible,"onUpdate:visible":n[2]||(n[2]=t=>r.visible=t),width:"600px",title:r.update?e.__("Edit Exam Result"):e.__("Publish Exam Result"),onOk:m.handleOk},{footer:l(()=>[a("div",z,[o(p,{loading:r.form.processing,type:"button",onClick:m.submit,theme:"primary"},{default:l(()=>[u(i(e.__("Save")),1)]),_:1},8,["loading","onClick"]),o(p,{loading:!1,type:"button",onClick:m.handleOk,theme:"outline-danger"},{default:l(()=>[u(i(e.__("Cancel")),1)]),_:1},8,["onClick"])])]),default:l(()=>[a("form",G,[a("div",H,[o(h,{for:"class",value:"Select Exam",required:!0}),o(E,{id:"exam","close-on-select":!0,"can-clear":!1,searchable:!0,modelValue:r.form.exam,"onUpdate:modelValue":n[1]||(n[1]=t=>r.form.exam=t),"create-option":!1,placeholder:e.__("Exam"),options:c.exams.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"]),o(_,{error:e.$page.props.errors.exam},null,8,["error"])]),a("div",null,[o(h,{for:"name",value:"Attachment",required:!r.update},null,8,["required"]),o(B,{accept:".xlsx",type:"file",id:"name",name:"name",class:"mt-1 block w-full dark:bg-gray-700",onChange:m.onFileChange},null,8,["onChange"]),o(_,{error:e.$page.props.errors.attachment},null,8,["error"]),a("div",J,[a("span",null,i(e.__("Supported extension"))+" .xlsx",1),a("a",K,i(e.__("Download Example File")),1)])])])]),_:1},8,["visible","title","onOk"])]),_:1},8,["title"])}const re=L(O,[["render",Q]]);export{re as default};
