import{_ as K}from"./AppLayout-pRkTteQX.js";import{P as J}from"./Pagination-BOIqYq_w.js";import W from"./Form-B1PLR7pI.js";import{T as Y}from"./ToolTip-BDAKiZ28.js";import Z from"./Show-ljxnQdCf.js";import{_ as $}from"./Modal-BLSUD_Cv.js";import{F as ee}from"./FullCalendar-Db2DnTWS.js";import{T as te}from"./TdUserShow-2NeczW4c.js";import{_ as oe,N as se,r as a,e as h,o as u,a as s,w as i,b as t,t as r,i as p,l as le,m as v,H as k,c as ae,F as b,j as ne,h as w,n as re,f as ie}from"./app-R3TKzMFz.js";import{r as de}from"./XMarkIcon-8_3jvOSV.js";import{r as ce}from"./CheckIcon--rzB6Prx.js";import{r as ue}from"./EyeIcon-CK2ADUCC.js";import{r as pe}from"./MagnifyingGlassIcon-BrVlPJ1Z.js";import{r as _e}from"./TrashIcon-bv6UB_hV.js";import{r as he}from"./PencilSquareIcon-CBvao7ks.js";import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";import"./main-DabsMeR3.js";import"./main-Bk5HSv5c.js";import"./main-9gx3aQUK.js";const me={props:{leaves:Object,filter_data:Object,users:Object,leave_types:Object},data(){return{loading:!1,options:[],causeModal:!1,filter:{keyword:this.filter_data.keyword??"",start_date:this.filter_data.start_date??null,end_date:this.filter_data.end_date??null,status:this.filter_data.status??null,role:this.filter_data.role??null,leave_type:this.filter_data.leave_type??null},searchQuery:this.filter_data.keyword??"",leave:"",visible:!1,show_leave:"",reject:ie.useForm({id:"",cause_description:""})}},created(){this.options.push({value:"",label:"All"});for(const[e,l]of Object.entries(this.leave_types))this.options.push({value:l.slug,label:l.name})},components:{AppLayout:K,Pagination:J,PencilSquareIcon:he,TrashIcon:_e,RejectModal:$,MagnifyingGlassIcon:pe,EditForm:W,EyeIcon:ue,CheckIcon:ce,XMarkIcon:de,TdUserShow:te,ToolTip:Y,ShowModal:Z,FullCalendar:ee,NothingFound:se},watch:{searchQuery(e){this.filter.keyword=e,this.filterData()}},methods:{filterData(){this.loading=!0,this.$inertia.get(this.route("manage-leave.index"),this.filter,{preserveScroll:!0,onFinish:e=>{this.loading=!1}})},filterOption(e,l){return l.label.toLowerCase().indexOf(e.toLowerCase())>=0},statusChange(e,l){this.loading=!0,this.$inertia.post(this.route("leave.status.change",e),{status:l,cause:this.reject.cause_description},{preserveScroll:!0,onSuccess:c=>{this.closeModal()},onFinish:c=>{this.loading=!1}})},rejectStatus(e){this.reject.id=e,this.causeModal=!0},closeModal(){this.reject.cause_description="",this.reject.id="",this.causeModal=!1},destroy(e){if(confirm("Are you sure ?"))this.$inertia.delete(this.route("manage-leave.destroy",e),{preserveScroll:!0});else return!1},edit(e){this.leave=e,this.$refs.editModal.showModal()},show(e){this.show_leave=e,this.visible=!0},hide(){this.visible=!1}}},ge={class:"pb-12 overflow-x-auto"},fe={class:"dark:text-gray-400 flex items-center"},be={class:"bg-blue-500 text-white rounded ml-2 px-1 text-xs py-0.5"},ye={class:"mb-4"},ve={class:"xl:col-span-2"},ke={class:"relative w-full"},we={type:"submit",class:"absolute inset-y-0 right-0 flex items-center px-3 text-white bg-blue-700 rounded-r-lg hover:bg-blue-800 focus:ring-2 focus:ring-blue-500"},xe={class:"sr-only"},Ce={class:"xl:col-span-1"},je={for:"start_date",class:"block mb-1 text-sm font-medium"},Se={class:"xl:col-span-1"},Fe={for:"end_date",class:"block mb-1 text-sm font-medium"},Me={class:"xl:col-span-1"},Te={class:"xl:col-span-2"},Ae={class:"xl:col-span-1"},Be={class:"xl:col-span-1"},Ie={class:"overflow-hidden"},Le={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ve={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Oe={scope:"col",class:"py-4 px-5 whitespace-nowrap"},De={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ne={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ue={scope:"col",class:"py-4 px-5 whitespace-nowrap"},Ee={scope:"row",class:"flex items-center py-4 px-5 text-gray-900 whitespace-nowrap dark:text-white"},Pe={class:"py-4 px-5"},Re={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},ze={key:0},qe={class:"py-4 px-5"},Qe={class:"inline-block mb-2 bg-blue-100 dark:bg-gray-700 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:text-gray-400"},Ge={class:"py-4 px-5 whitespace-nowrap"},He={class:"mb-2"},Xe={class:"py-4 px-5"},Ke={class:"py-4 px-5"},Je={class:"flex gap-1 items-center"},We=["onClick","id"],Ye=["onClick","id"],Ze=["onClick","id"],$e=["onClick","id"],et=["onClick","id"],tt={class:"flex justify-center"},ot={class:"bg-white rounded-lg overflow-x-auto dark:bg-gray-800"},st={class:"mb-1"};function lt(e,l,c,at,n,d){const x=a("Head"),C=a("BreadcrumbLink"),j=a("Breadcrumb"),m=a("global-button"),S=a("page-header"),F=a("global-input"),M=a("MagnifyingGlassIcon"),f=a("a-select"),T=a("td-user-show"),A=a("CheckIcon"),_=a("tool-tip"),B=a("XMarkIcon"),I=a("PencilSquareIcon"),L=a("eye-icon"),V=a("trash-icon"),O=a("NothingFound"),D=a("global-table"),N=a("pagination"),U=a("full-calendar"),E=a("edit-form"),P=a("a-button"),R=a("show-modal"),z=a("a-modal"),q=a("global-label"),Q=a("global-textarea"),G=a("input-error"),H=a("reject-modal"),X=a("AppLayout");return u(),h(b,null,[s(x,{title:e.__("Teacher / Administartion Leave List")},null,8,["title"]),s(X,null,{default:i(()=>[s(j,null,{default:i(()=>[s(C,{title:e.__("Teacher / Administartion Leave")},null,8,["title"])]),_:1}),t("div",ge,[s(S,null,{content:i(()=>[s(m,{loading:!1,type:"link",url:e.route("leave-type.index"),theme:"primary",id:"testLeaveType"},{default:i(()=>[p(r(e.__("Leave Type")),1)]),_:1},8,["url"])]),default:i(()=>[t("div",fe,[t("span",null,r(e.__("Teacher / Adminstration Leave List")),1),t("span",be,r(c.leaves.total),1)])]),_:1}),t("div",null,[t("div",ye,[t("form",{class:"grid grid-cols-1 gap-4 xl:grid-cols-7 xl:gap-4 items-end",onSubmit:l[6]||(l[6]=le(o=>d.filterData(),["prevent"]))},[t("div",ve,[t("div",ke,[s(F,{modelValue:n.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=o=>n.searchQuery=o),type:"text",class:"block w-full pr-10 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Keyword")},null,8,["modelValue","placeholder"]),t("button",we,[s(M,{class:"w-5 h-5"}),t("span",xe,r(e.__("Search")),1)])])]),t("div",Ce,[t("label",je,r(e.__("From")),1),v(t("input",{type:"date",id:"start_date","onUpdate:modelValue":l[1]||(l[1]=o=>n.filter.start_date=o),class:"w-full p-2 border rounded"},null,512),[[k,n.filter.start_date]])]),t("div",Se,[t("label",Fe,r(e.__("To")),1),v(t("input",{type:"date",id:"end_date","onUpdate:modelValue":l[2]||(l[2]=o=>n.filter.end_date=o),class:"w-full p-2 border rounded"},null,512),[[k,n.filter.end_date]])]),t("div",Me,[s(f,{class:"width-100",size:"large",value:n.filter.role,"onUpdate:value":l[3]||(l[3]=o=>n.filter.role=o),"show-search":"",placeholder:e.__("Select a role"),options:[{title:"All",id:"all",value:"all"},{title:"Teacher",id:"teacher",value:"Teacher"},{title:"Administration",id:"administration",value:"Administration"},{title:"Accountant",id:"accountant",value:"Accountant"}],"filter-option":d.filterOption,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","filter-option","onFocus","onBlur","onChange"])]),t("div",Te,[s(f,{class:"w-full",size:"large",value:n.filter.leave_type,"onUpdate:value":l[4]||(l[4]=o=>n.filter.leave_type=o),"show-search":"",placeholder:e.__("Select a leave type"),options:n.options,onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","options","onFocus","onBlur","onChange"])]),t("div",Ae,[s(f,{class:"w-full",size:"large",value:n.filter.status,"onUpdate:value":l[5]||(l[5]=o=>n.filter.status=o),"show-search":"",placeholder:e.__("Select a status"),options:[{title:"All",id:"all",value:"all"},{title:"Pending",id:"pending",value:"pending"},{title:"Accepted",id:"accepted",value:"accepted"},{title:"Rejected",id:"rejected",value:"rejected"}],onFocus:e.handleFocus,onBlur:e.handleBlur,onChange:e.handleChange},null,8,["value","placeholder","onFocus","onBlur","onChange"])]),t("div",Be,[s(m,{loading:n.loading,type:"submit",theme:"primary",class:"w-full"},{default:i(()=>[p(r(e.__("Search")),1)]),_:1},8,["loading"])])],32)]),t("div",Ie,[s(D,null,{head:i(()=>[t("th",Le,r(e.__("Name")),1),t("th",Ve,r(e.__("Role")),1),t("th",Oe,r(e.__("Leave Type")),1),t("th",De,r(e.__("Date")),1),t("th",Ne,r(e.__("Status")),1),t("th",Ue,r(e.__("Action")),1)]),body:i(()=>[c.leaves.data.length>0?(u(!0),h(b,{key:0},ne(c.leaves.data,o=>{var y;return u(),h("tr",{key:o.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Ee,[s(T,{image:o.user.profile_photo_url,name:o.user.name,email:o.user.email},null,8,["image","name","email"])]),t("td",Pe,[t("div",Re,r(o.user.role),1),o.user.department&&o.user.role=="Teacher"?(u(),h("div",ze,r(o.user.department.name),1)):w("",!0)]),t("td",qe,[t("div",Qe,r((y=o.type)==null?void 0:y.name),1)]),t("td",Ge,[t("div",He,r(o.days),1),t("div",null,r(e.formatTime(o.start,""))+" - "+r(e.formatTime(o.end,"")),1)]),t("td",Xe,[t("span",{class:re([o.status=="pending"?"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 dark:opacity-60":o.status=="accepted"?"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 dark:opacity-60":o.status=="rejected"?"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 dark:opacity-60":"","capitalize text-xs font-semibold mr-2 px-2.5 py-0.5 rounded"])},r(o.status),3)]),t("td",Ke,[t("div",Je,[o.status=="pending"?(u(),h(b,{key:0},[t("button",{type:"button",onClick:g=>d.statusChange(o.id,"accepted"),class:"group relative",id:"testAccept"+o.id},[s(A,{class:"text-green-500 w-6 h-6"}),s(_,{text:e.__("Accept")},null,8,["text"])],8,We),t("button",{type:"button",onClick:g=>d.rejectStatus(o.id),class:"group relative",id:"testReject"+o.id},[s(B,{class:"text-red-500 w-6 h-6"}),s(_,{text:e.__("Reject")},null,8,["text"])],8,Ye),t("button",{onClick:g=>d.edit(o),type:"button",class:"group relative",id:"testEdit"+o.id},[s(I,{class:"text-blue-400 hover:text-blue-300 w-6 h-6"}),s(_,{text:e.__("Edit")},null,8,["text"])],8,Ze)],64)):w("",!0),t("button",{onClick:g=>d.show(o),type:"button",class:"group relative",id:"testShow"+o.id},[s(L,{class:"w-6 h-6 text-pink-400 hover:text-pink-300"}),s(_,{text:e.__("View")},null,8,["text"])],8,$e),t("button",{type:"button",onClick:g=>d.destroy(o.id),class:"group relative",id:"testDelete"+o.id},[s(V,{class:"w-6 h-6 text-red-400 hover:text-red-300"}),s(_,{text:e.__("Delete")},null,8,["text"])],8,et)])])])}),128)):(u(),ae(O,{key:1,asShow:"tr",cssClass:"text-center"}))]),_:1}),t("div",tt,[s(N,{class:"mt-6",links:c.leaves.links},null,8,["links"])])])])]),t("div",ot,[s(U,{data:c.leaves.data},null,8,["data"])]),s(E,{ref:"editModal",users:c.users,leave:n.leave},null,8,["users","leave"]),s(z,{visible:n.visible,"onUpdate:visible":l[7]||(l[7]=o=>n.visible=o),title:n.show_leave&&n.show_leave.user.name,onOk:d.hide},{footer:i(()=>[s(P,{key:"back",onClick:d.hide},{default:i(()=>[p(r(e.__("Close")),1)]),_:1},8,["onClick"])]),default:i(()=>[s(R,{leave:n.show_leave},null,8,["leave"])]),_:1},8,["visible","title","onOk"]),s(H,{show:n.causeModal,onClose:d.closeModal},{title:i(()=>[p(r(e.__("Insert Reject Cause")),1)]),content:i(()=>[t("div",st,[s(q,{for:"description",value:"Cause",required:!0}),s(Q,{placeholder:e.__("Description"),id:"name",error:e.$page.props.errors.cause,modelValue:n.reject.cause_description,"onUpdate:modelValue":l[8]||(l[8]=o=>n.reject.cause_description=o),class:"mt-1 block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"},null,8,["placeholder","error","modelValue"]),s(G,{error:e.$page.props.errors.cause},null,8,["error"])])]),footer:i(()=>[s(m,{loading:!1,type:"button",onClick:l[9]||(l[9]=o=>d.closeModal()),class:"mr-2",theme:"outline-danger"},{default:i(()=>[p(r(e.__("Cancel")),1)]),_:1}),s(m,{loading:n.reject.processing,type:"button",onClick:l[10]||(l[10]=o=>d.statusChange(n.reject.id,"rejected"))},{default:i(()=>[p(r(e.__("Save")),1)]),_:1},8,["loading"])]),_:1},8,["show","onClose"])]),_:1})],64)}const Bt=oe(me,[["render",lt]]);export{Bt as default};
