import{_ as A}from"./AppLayout-pRkTteQX.js";import{_ as B,N,a2 as S,a3 as T,r as l,c as R,o as c,w as n,a as i,b as t,i as m,t as s,l as F,m as u,H as _,e as h,F as M,j as C,s as f,g as D,f as E}from"./app-R3TKzMFz.js";import{_ as U}from"./Modal-BLSUD_Cv.js";import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./XMarkIcon-8_3jvOSV.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";const V={components:{AppLayout:A,Breadcrumb:T,BreadcrumbLink:S,NothingFound:N,ExportModal:U},props:{LateAttendances:{type:Array,required:!0}},data(){return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",export_data:E.useForm({type:"Excel",course:"all"}),filter:{name:"",month:""}}},setup(e){return{LateAttendances:D(e.LateAttendances)}},computed:{filteredAttendees(){return this.LateAttendances.filter(e=>{let o=!0,a=!0;return this.filter.name.trim()!==""&&(o=e.name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(a=new Date(e.date).toISOString().slice(0,7)===this.filter.month),o&&a})}},methods:{filterData(){f.get(this.route("teacher.lateness.report"),{params:this.filter}).then(e=>{this.attendees=e.data}).catch(e=>{console.error(e)})},exportSubmit(){this.loading=!0,f({url:this.route("teacher.lateness.export"),method:"POST",data:this.filter,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(e=>{const o=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=o,a.setAttribute("download","teacher-lateness-report.xlsx"),document.body.appendChild(a),a.click(),this.loading=!1}).catch(e=>{this.loading=!1,console.error(e)})}}},O={class:"flex flex-col sm:flex-row gap-4"},j={class:"mb-4"},I={class:"flex items-center"},q={for:"month",class:"ml-4 mr-2"},H={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},K={class:"py-4 px-5"},P={class:"py-4 px-5"},X={class:"py-4 px-5"},z={class:"py-4 px-5 text-gray-900 dark:text-white"},G={class:"py-4 px-5 text-gray-900 dark:text-white"},J={class:"py-4 px-5 text-gray-900 dark:text-white"},Q={key:1},W={colspan:"3",class:"text-center p-4"};function Y(e,o,a,b,d,p){const g=l("BreadcrumbLink"),y=l("Breadcrumb"),x=l("global-button"),L=l("page-header"),k=l("NothingFound"),w=l("global-table"),v=l("AppLayout");return c(),R(v,{title:e.__("Teacher Lateness Report")},{header:n(()=>[m(s(e.__("Teacher Lateness Report")),1)]),default:n(()=>[i(y,null,{default:n(()=>[i(g,{title:e.__("Teacher Lateness Report"),href:e.route("teacher.lateness.report")},null,8,["title","href"])]),_:1}),t("div",null,[i(L,{class:"flex-col sm:flex-row"},{content:n(()=>[t("div",O,[i(x,{loading:d.loading,onClick:o[0]||(o[0]=r=>p.exportSubmit()),type:"button",theme:"sky"},{default:n(()=>[m(s(e.__("Export")),1)]),_:1},8,["loading"])])]),default:n(()=>[m(s(e.__("Teacher Lateness Report"))+" ",1)]),_:1}),t("div",j,[t("form",{onSubmit:o[3]||(o[3]=F((...r)=>p.filterData&&p.filterData(...r),["prevent"]))},[t("div",I,[u(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=r=>d.filter.name=r),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[_,d.filter.name]]),t("label",q,s(e.__("Month"))+":",1),u(t("input",{type:"month","onUpdate:modelValue":o[2]||(o[2]=r=>d.filter.month=r),id:"month",class:"p-2 border rounded"},null,512),[[_,d.filter.month]]),t("button",H,s(e.__("Filter")),1)])],32)]),i(w,null,{head:n(()=>[t("th",K,s(e.__("Name")),1),t("th",P,s(e.__("Time In")),1),t("th",X,s(e.__("Date")),1)]),body:n(()=>[p.filteredAttendees.length>0?(c(!0),h(M,{key:0},C(p.filteredAttendees,r=>(c(),h("tr",{key:r.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",z,s(r.name),1),t("td",G,s(r.time_in),1),t("td",J,s(r.date),1)]))),128)):(c(),h("tr",Q,[t("td",W,[i(k,{asShow:"div"})])]))]),_:1}),o[4]||(o[4]=t("div",{class:"flex justify-center"},null,-1))])]),_:1},8,["title"])}const de=B(V,[["render",Y],["__scopeId","data-v-0e4bd4c7"]]);export{de as default};
