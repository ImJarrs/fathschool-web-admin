import{_ as M}from"./AppLayout-pRkTteQX.js";import{T as k}from"./ToolTip-BDAKiZ28.js";import{P as w}from"./Pagination-BOIqYq_w.js";import{_ as Y,N as S,k as l,r as i,c as F,o as V,w as u,a as r,b as e,t as p,l as B,i as I,f as L}from"./app-R3TKzMFz.js";import{P as N}from"./PieChart-DPsnqrcO.js";import{_ as A}from"./Modal-BLSUD_Cv.js";import{s as C}from"./multiselect-S7NpFuS0.js";/* empty css                                                         */import{r as D}from"./ArrowRightIcon-BT0ViTrh.js";import{r as P}from"./EyeIcon-CK2ADUCC.js";import{r as T}from"./PencilSquareIcon-CBvao7ks.js";import{r as E}from"./TrashIcon-bv6UB_hV.js";import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./XMarkIcon-8_3jvOSV.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";import"./auto-CkVXdHX2.js";const R={components:{AppLayout:M,ToolTip:k,TrashIcon:E,PencilSquareIcon:T,Pagination:w,EyeIcon:P,ArrowRightIcon:D,dayjs:l,PieChart:N,ExportModal:A,Multiselect:C,NothingFound:S},props:{courses:Array,students:Array,filter_data:Object},data(){return{filter:L.useForm({course_id:this.filter_data.course_id??"",student_id:this.filter_data.student_id??"",month:this.filter_data.month??"",year:this.filter_data.year??""}),customDateFormat:"YYYY-MM-DD",customMonthFormat:"YYYY-MM",month_value:this.filter_data.month?l(l(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,students:this.students,selected_month:this.filter_data.month,selected_year:this.filter_data.year,visible:!1,loading:!1,export_data:{student:"",month:"",year:"",course:""}}},watch:{month_value:function(t){t?(this.filter.month=l(t).format("MM"),this.filter.year=l(t).format("YYYY")):(this.filter.month=null,this.filter.year=null)},"filter.course_id":function(t,o){t&&this.filterData()}},methods:{filterData(){this.filter.get(this.route("report.student.fees"))},exportSubmit(){this.loading=!0,this.export_data.course=this.filter.course_id,this.export_data.student=this.filter.student_id,this.export_data.month=this.filter.month,this.export_data.year=this.filter.year,axios({url:this.route("report.studentFee.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(t=>{var o=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=o;const d=t.headers["content-disposition"],a=d.indexOf('"')+1,m=d.lastIndexOf('"'),c=d.substring(a,m);n.setAttribute("download",c),document.body.appendChild(n),n.click(),this.loading=!1,this.visible=!1}).catch(t=>{this.loading=!1,this.visible=!1})},getMonthName(t){return l(`${this.selected_year}-${t}`).format("MMMM")}},computed:{daysInMonth(){return this.selected_year==""||this.selected_month==""?!1:l(`${this.selected_year}-${this.selected_month}`).daysInMonth()}},mounted(){}},U={class:"py-12"},j={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},O={class:"dark:text-gray-400 mb-0 text-2xl"},$={class:"col-span-2"},z={class:"col-span-2"},q={class:"col-span-2"},H={class:"flex gap-3"},G={class:"col-span-1"},J={class:"text-center mt-52"},K={class:"mt-2 text-sm font-medium text-gray-900"},Q={class:"mt-1 text-sm text-gray-500"};function W(t,o,n,d,a,m){const c=i("BreadcrumbLink"),_=i("Breadcrumb"),b=i("page-header"),h=i("global-label"),f=i("Multiselect"),g=i("a-date-picker"),x=i("global-button"),y=i("NothingFound"),v=i("AppLayout");return V(),F(v,{title:t.__("Fees Report")},{default:u(()=>[r(_,null,{default:u(()=>[r(c,{href:t.route("reports.index"),title:"Report"},null,8,["href"]),r(c,{title:t.__("Export Fees")},null,8,["title"])]),_:1}),e("div",U,[e("div",j,[r(b,{class:"flex justify-between items-center"},{default:u(()=>[e("div",null,[e("h1",O,p(t.__("Student Fees")),1)])]),_:1}),e("form",{class:"grid grid-cols-1 md:grid-cols-9 gap-2 items-center px-6",onSubmit:o[3]||(o[3]=B(s=>m.exportSubmit(),["prevent"]))},[e("div",$,[r(h,{for:"class",value:"Course"}),r(f,{id:"class",class:"dark:text-gray-900",modelValue:a.filter.course_id,"onUpdate:modelValue":o[0]||(o[0]=s=>a.filter.course_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:t.__("Select Course"),options:n.courses.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),e("div",z,[r(h,{for:"student",value:"Student"}),r(f,{id:"student",class:"dark:text-gray-900",modelValue:a.filter.student_id,"onUpdate:modelValue":o[1]||(o[1]=s=>a.filter.student_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:t.__("Select Student"),options:a.students.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),e("div",q,[r(h,{for:"month",value:"Month"}),e("div",H,[r(g,{size:"large",placeholder:t.__("Select Month"),picker:"month",value:a.month_value,"onUpdate:value":o[2]||(o[2]=s=>a.month_value=s),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),e("div",G,[r(x,{loading:a.loading,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:u(()=>[I(p(t.__("Export Fees")),1)]),_:1},8,["loading"])])],32)]),e("div",J,[o[4]||(o[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)),e("h3",K,[r(y,{asShow:"div"})]),e("p",Q,p(t.__("Please choose the course student and month")),1)])])]),_:1},8,["title"])}const xt=Y(R,[["render",W]]);export{xt as default};
