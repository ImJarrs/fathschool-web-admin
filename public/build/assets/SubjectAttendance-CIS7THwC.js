import{_ as j}from"./AppLayout-D06oZWsy.js";import{_ as k,k as n,N as w,r,c as M,o as S,w as u,a,b as t,t as f,l as V,i as A,s as L,f as Y}from"./app-B4siR4nP.js";import{s as B}from"./multiselect-BtWcUH1S.js";/* empty css                                                         */import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const N={components:{AppLayout:j,Multiselect:B,NothingFound:w,dayjs:n},props:{courses:Array,subjects:Array,filter_data:Object},data(){return{filter:Y.useForm({course_id:this.filter_data.course_id??"",subject_id:this.filter_data.subject_id??"",month:this.filter_data.month??"",year:this.filter_data.year??""}),visible:!1,loading:!1,month_value:this.filter_data.month?n(n(this.filter_data.month).format("MMM")+this.filter_data.year,this.customMonthFormat):null,export_data:{course:"",subject:"",month:"",year:""}}},watch:{month_value:function(e){e?(this.filter.month=n(e).format("MM"),this.filter.year=n(e).format("YYYY")):(this.filter.month=null,this.filter.year=null)},"filter.course_id":function(e,o){e&&this.filterData()}},methods:{filterData(){this.filter.get(this.route("report.subject.attendance"))},exportSubmit(){this.loading=!0,this.export_data.course=this.filter.course_id,this.export_data.subject=this.filter.subject_id,this.export_data.month=this.filter.month,this.export_data.year=this.filter.year,L({url:this.route("report.subject.attendance.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{var o=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=o;const c=e.headers["content-disposition"],l=c.indexOf('"')+1,h=c.lastIndexOf('"'),d=c.substring(l,h);i.setAttribute("download",d),document.body.appendChild(i),i.click(),i.remove(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})},handleYearSelection(){const e=this.year.$y;this.filter.year=e}}},C={class:"py-12"},U={class:"mb-3 rounded-lg py-4 font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"},F={class:"dark:text-gray-400 mb-0 text-2xl"},O={class:"col-span-2"},R={class:"col-span-2"},D={class:"col-span-2"},E={class:"flex gap-3"},I={class:"col-span-2"},T={class:"text-center mt-52"},z={class:"mt-2 text-sm font-medium text-gray-900"};function H(e,o,i,c,l,h){const d=r("BreadcrumbLink"),_=r("Breadcrumb"),b=r("page-header"),p=r("global-label"),m=r("Multiselect"),g=r("a-date-picker"),v=r("global-button"),x=r("NothingFound"),y=r("AppLayout");return S(),M(y,{title:e.__("Subject Attendance Report")},{default:u(()=>[a(_,null,{default:u(()=>[a(d,{href:e.route("reports.index"),title:"Report"},null,8,["href"]),a(d,{title:e.__("Subject Attendance List")},null,8,["title"])]),_:1}),t("div",C,[t("div",U,[a(b,{class:"flex justify-between items-center"},{default:u(()=>[t("div",null,[t("h1",F,f(e.__("Subject Attendance")),1)])]),_:1}),t("form",{class:"grid grid-cols-1 md:grid-cols-8 gap-2 items-center px-6",onSubmit:o[3]||(o[3]=V(s=>h.exportSubmit(),["prevent"]))},[t("div",O,[a(p,{for:"class",value:"Course"}),a(m,{id:"class",class:"dark:text-gray-900",modelValue:l.filter.course_id,"onUpdate:modelValue":o[0]||(o[0]=s=>l.filter.course_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Course"),options:i.courses.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",R,[a(p,{for:"subject",value:"Subject"}),a(m,{id:"subject",class:"dark:text-gray-900",modelValue:l.filter.subject_id,"onUpdate:modelValue":o[1]||(o[1]=s=>l.filter.subject_id=s),"close-on-select":!0,"can-clear":!1,searchable:!0,"create-option":!1,placeholder:e.__("Select Subjects"),options:i.subjects.map(s=>({value:s.id,label:s.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),t("div",D,[a(p,{for:"month",value:"Month"}),t("div",E,[a(g,{size:"large",placeholder:e.__("Select Month"),picker:"month",value:l.month_value,"onUpdate:value":o[2]||(o[2]=s=>l.month_value=s),format:"MMM YYYY",style:{width:"400px"}},null,8,["placeholder","value"])])]),t("div",I,[a(v,{loading:l.loading,class:"text-white mt-6 bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:u(()=>[A(f(e.__("Export")),1)]),_:1},8,["loading"])])],32)]),t("div",T,[o[4]||(o[4]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[t("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)),t("h3",z,[a(x,{asShow:"div"})])])])]),_:1},8,["title"])}const oe=k(N,[["render",H]]);export{oe as default};
