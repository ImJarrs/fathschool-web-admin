import{_ as A}from"./AppLayout-pRkTteQX.js";import{_ as S,N as L,a2 as T,a3 as B,r as n,c as N,o as p,w as r,a as l,b as e,i as m,t as o,l as j,m as u,H as f,e as _,F as C,j as D,s as F,g as M,f as E}from"./app-R3TKzMFz.js";import{_ as O}from"./Modal-BLSUD_Cv.js";import"./index-KXBnMdcv.js";import"./TopBarMenu-CcNsgK0k.js";import"./CheckCircleIcon-B4BTDw9l.js";import"./XMarkIcon-8_3jvOSV.js";import"./WarningToast-B-mvdry_.js";import"./UserIcon-CI54yQqe.js";import"./PlusCircleIcon-GzopV6YD.js";import"./Bars3Icon-BbGKyUny.js";const U={components:{AppLayout:A,Breadcrumb:B,BreadcrumbLink:T,NothingFound:L,ExportModal:O},props:{teacherAttendances:{type:Array,required:!0}},data(){return{loading:!1,options:[],options2:[],export_options:[],visible:!1,export_visible:!1,show_user:"",export_data:E.useForm({type:"Excel",course:"all"}),filter:{name:"",month:""}}},setup(t){return{teacherAttendances:M(t.teacherAttendances)}},computed:{filteredAttendance(){return this.teacherAttendances.filter(t=>{let s=!0,d=!0;return this.filter.name.trim()!==""&&(s=t.user.name.toLowerCase().includes(this.filter.name.trim().toLowerCase())),this.filter.month!==""&&(d=new Date(t.date).toISOString().slice(0,7)===this.filter.month),s&&d})}},methods:{filterData(){this.teacherAttendances=this.filteredAttendance},exportSubmit(){this.loading=!0;let t={};this.filter.name.trim()!==""&&(t.name=this.filter.name.trim()),this.filter.month!==""&&(t.month=this.filter.month),F({url:this.route("teacherclass.export"),method:"POST",data:{...this.export_data,...t},headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},responseType:"blob"}).then(s=>{this.export_data.type;var d=window.URL.createObjectURL(new Blob([s.data])),i=document.createElement("a");i.href=d,i.setAttribute("download","teacherclass-report.xlsx"),document.body.appendChild(i),i.click(),this.loading=!1,this.visible=!1}).catch(s=>{this.loading=!1,this.visible=!1})}}},V={class:"flex flex-col sm:flex-row gap-4"},R={class:"mb-4"},I={class:"flex items-center"},q={for:"month",class:"ml-4 mr-2"},H={type:"submit",class:"ml-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},K={class:"py-4 px-5"},P={class:"py-4 px-5"},X={class:"py-4 px-5"},z={class:"py-4 px-5"},G={class:"py-4 px-5"},J={class:"py-4 px-5"},Q={class:"py-4 px-5 text-gray-900 dark:text-white"},W={class:"py-4 px-5 text-gray-900 dark:text-white"},Y={class:"py-4 px-5 text-gray-900 dark:text-white"},Z={class:"py-4 px-5 text-gray-900 dark:text-white"},$={class:"py-4 px-5 text-gray-900 dark:text-white"},tt={class:"py-4 px-5 text-gray-900 dark:text-white"},et={key:1},st={colspan:"6",class:"text-center p-4"};function ot(t,s,d,i,h,c){const b=n("BreadcrumbLink"),x=n("Breadcrumb"),y=n("global-button"),g=n("page-header"),k=n("NothingFound"),w=n("global-table"),v=n("AppLayout");return p(),N(v,{title:t.__("Teacher Subject Attendance")},{header:r(()=>[m(o(t.__("Teacher Subject Attendance")),1)]),default:r(()=>[l(x,null,{default:r(()=>[l(b,{title:t.__("Teacher Subject Attendance"),href:t.route("teacher.attendance")},null,8,["title","href"])]),_:1}),e("div",null,[l(g,{class:"flex-col sm:flex-row"},{content:r(()=>[e("div",V,[l(y,{loading:!1,onClick:s[0]||(s[0]=a=>c.exportSubmit()),type:"button",theme:"sky"},{default:r(()=>[m(o(t.__("Export")),1)]),_:1})])]),default:r(()=>[m(o(t.__("Teacher Subject Attendance"))+" ",1)]),_:1}),e("div",R,[e("form",{onSubmit:s[3]||(s[3]=j((...a)=>c.filterData&&c.filterData(...a),["prevent"]))},[e("div",I,[u(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>h.filter.name=a),id:"name",placeholder:"Name",class:"p-2 border rounded"},null,512),[[f,h.filter.name]]),e("label",q,o(t.__("Month"))+":",1),u(e("input",{type:"month","onUpdate:modelValue":s[2]||(s[2]=a=>h.filter.month=a),id:"month",class:"p-2 border rounded"},null,512),[[f,h.filter.month]]),e("button",H,o(t.__("Filter")),1)])],32)]),l(w,null,{head:r(()=>[e("th",K,o(t.__("Name")),1),e("th",P,o(t.__("Class")),1),e("th",X,o(t.__("Subject")),1),e("th",z,o(t.__("Date")),1),e("th",G,o(t.__("Time In")),1),e("th",J,o(t.__("Time Out")),1)]),body:r(()=>[c.filteredAttendance.length>0?(p(!0),_(C,{key:0},D(c.filteredAttendance,a=>(p(),_("tr",{key:a.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[e("td",Q,o(a.user.name),1),e("td",W,o(a.class_name),1),e("td",Y,o(a.subject_name),1),e("td",Z,o(a.date),1),e("td",$,o(a.time_in),1),e("td",tt,o(a.time_out),1)]))),128)):(p(),_("tr",et,[e("td",st,[l(k,{asShow:"div"})])]))]),_:1}),s[4]||(s[4]=e("div",{class:"flex justify-center"},null,-1))])]),_:1},8,["title"])}const ut=S(U,[["render",ot],["__scopeId","data-v-0a727245"]]);export{ut as default};
