import{_ as F}from"./AppLayout-D06oZWsy.js";import{_ as M,N,r as i,c as x,o as c,w as n,a as r,b as l,e as _,h as k,i as u,t as o,l as R,F as P,j,n as v,m as w,p as T,f as m}from"./app-B4siR4nP.js";import{P as O}from"./Pagination-DHbdUHOs.js";import{_ as q}from"./Modal-DEp1tEtC.js";import{s as I}from"./multiselect-BtWcUH1S.js";/* empty css                */import{r as z}from"./ArrowRightIcon-D68op2un.js";import"./index-DtyboiO1.js";import"./TopBarMenu-nQHiLmrq.js";import"./CheckCircleIcon-DRQ2Sg4c.js";import"./XMarkIcon-BWTnXq2K.js";import"./WarningToast-C-jPV3vQ.js";import"./UserIcon-C-1rgfXS.js";import"./PlusCircleIcon-BZ251gFF.js";import"./Bars3Icon-C3NvXC29.js";const G={components:{AppLayout:F,ArrowRightIcon:z,Pagination:O,ExportModal:q,Multiselect:I,NothingFound:N},props:{users:Array,filter_data:Object,transactions:Array},data(){return{visible:!1,form:m.useForm({assignment:"",file:"",description:""}),filter:m.useForm({keyword:this.filter_data.keyword??"",status:this.filter_data.status??"",parent_id:this.filter_data.parent_id??"",type:this.filter_data.type?this.filter_data.type:"all",amountType:this.filter_data.amountType?this.filter_data.amountType:"all",start_date:this.filter_data.start_date??"",end_date:this.filter_data.end_date??""}),loading:!1,export_data:m.useForm({type:"xlsx"})}},methods:{ucf(e){return e.charAt(0).toUpperCase()+e.slice(1)},setTabValue(e){let a=e.filter_column_data??"",s=e.value??"";this.filter[a]=s,this.filterData()},filterData(){this.filter.get(this.route("report.transaction"))},showExportModal(){this.visible=!0},exportSubmit(){this.loading=!0,axios({url:this.route("report.transaction.export"),method:"POST",data:this.export_data,responseType:"blob"}).then(e=>{let a=this.export_data.type;var s=window.URL.createObjectURL(new Blob([e.data])),f=document.createElement("a");f.href=s,f.setAttribute("download","transactions-report."+a),document.body.appendChild(f),f.click(),this.loading=!1,this.visible=!1}).catch(e=>{this.loading=!1,this.visible=!1})}}},H={class:"py-12"},J={key:0,class:"mb-3 ml-0.5"},K={class:"2xl:col-span-2"},Q={class:"2xl:col-span-2 flex gap-2"},W={class:"2xl:col-span-2 flex sm:flex-nowrap flex-wrap items-center gap-2"},X={class:"py-5 px-5",width:"25%"},Y={class:"py-5 px-5"},Z={class:"py-5 px-5"},$={class:"py-5"},ee={class:"py-5"},te={class:"py-5"},ae={class:"py-5 px-5"},le={class:"py-5 px-5"},oe={key:0,class:"py-5 px-5"},re={class:"py-5"},se={class:"py-5"},ie={class:"py-5"},ne={class:"flex justify-center mb-4"},de={class:"flex gap-6"},ue={class:"w-full rounded-lg cursor-pointer flex items-center pl-4 border border-gray-200 dark:border-gray-700"},pe={for:"pdf",class:"w-full cursor-pointer rounded-lg flex items-center pl-4 border border-gray-200 dark:border-gray-700"};function ce(e,a,s,f,d,p){const g=i("BreadcrumbLink"),D=i("Breadcrumb"),b=i("global-button"),V=i("page-header"),A=i("global-input"),S=i("Multiselect"),y=i("tab-filter"),C=i("NothingFound"),E=i("global-table"),U=i("pagination"),h=i("global-label"),L=i("export-modal"),B=i("AppLayout");return c(),x(B,{title:e.__("Transactions Report")},{default:n(()=>[r(D,null,{default:n(()=>[r(g,{href:e.route("reports.index"),title:"Report"},null,8,["href"]),r(g,{title:e.__("Transactions")},null,8,["title"])]),_:1}),l("div",H,[r(V,null,{content:n(()=>[r(b,{onClick:a[0]||(a[0]=t=>p.showExportModal()),loading:!1,type:"button",class:"text-white bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:n(()=>[u(o(e.__("Export")),1)]),_:1})]),default:n(()=>[u(o(e.__("Transactions Report"))+" ",1)]),_:1}),s.transactions.data.length>0?(c(),_("div",J,[l("form",{class:"grid grid-cols-1 2xl:grid-cols-6 gap-2 items-center",onSubmit:a[3]||(a[3]=R(t=>p.filterData(),["prevent"]))},[l("div",K,[r(A,{id:"search",modelValue:d.filter.keyword,"onUpdate:modelValue":a[1]||(a[1]=t=>d.filter.keyword=t),type:"search",class:"block w-full dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400",placeholder:e.__("Search: Transactions Title"),error:e.$page.props.errors.keyword},null,8,["modelValue","placeholder","error"])]),l("div",Q,[r(S,{id:"user","close-on-select":!0,"can-clear":!0,searchable:!0,modelValue:d.filter.parent_id,"onUpdate:modelValue":a[2]||(a[2]=t=>d.filter.parent_id=t),"create-option":!1,placeholder:e.__("Select User"),options:s.users.map(t=>({value:t.id,label:t.name})),autocomplete:"off"},null,8,["modelValue","placeholder","options"])]),l("div",W,[r(y,{onSetTabData:p.setTabValue,filterData:s.filter_data?s.filter_data.status:"",filter_column:"status",tab_data:[{title:"All",id:"all",value:"all"},{title:"Paid",id:"paid",value:"paid"},{title:"Unpaid",id:"unpaid",value:"unpaid"}]},null,8,["onSetTabData","filterData"]),r(y,{onSetTabData:p.setTabValue,filterData:s.filter_data?s.filter_data.amountType:"",filter_column:"amountType",tab_data:[{title:"All",id:"all2",value:"all"},{title:"Income",id:"income",value:"income"},{title:"Expense",id:"expense",value:"expense"}]},null,8,["onSetTabData","filterData"]),r(b,{loading:d.filter.processing,type:"submit",class:"text-white whitespace-nowrap bg-blue-500 dark:bg-blue-500 hover:bg-blue-500 active:bg-blue-600 dark:active:bg-blue-600 focus:border-blue-600 dark:focus:border-blue-600 focus:ring focus:ring-blue-300 dark:focus:ring-blue-300"},{default:n(()=>[u(o(e.__("Search")),1)]),_:1},8,["loading"])])],32)])):k("",!0),r(E,null,{head:n(()=>[l("th",X,o(e.__("Title")),1),l("th",Y,o(e.__("User")),1),l("th",Z,o(e.__("Type")),1),l("th",$,o(e.__("Amount")),1),l("th",ee,o(e.__("Paid Amount")),1),l("th",te,o(e.__("Date")),1)]),body:n(()=>[s.transactions.data.length>0?(c(!0),_(P,{key:0},j(s.transactions.data,t=>(c(),_("tr",{key:t.id,class:"border-t dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[l("td",ae,o(t.title),1),l("td",le,o(t.user.name),1),t&&t.type?(c(),_("td",oe,[l("span",null,o(t.type.name),1),a[8]||(a[8]=u()),a[9]||(a[9]=l("br",null,null,-1)),l("span",{class:v(["dark:opacity-60 text-xs font-bold mr-2 px-2.5 py-0.5 rounded mt-3",t.type.type=="income"?"bg-green-100 dark:bg-green-200 text-green-800 dark:text-green-800":"bg-yellow-100  dark:bg-yellow-200 text-yellow-800 dark:text-yellow-800"])},o(p.ucf(t.type.type)),3)])):k("",!0),l("td",re,[u(o(e.convertAmount(t.amount))+" ",1),a[10]||(a[10]=l("br",null,null,-1)),l("span",{class:v(["text-xs font-bold mr-2 px-2.5 py-0.5 rounded mt-3",t.status=="paid"?"bg-green-100 text-green-600 dark:opacity-60":"bg-blue-100 text-blue-600 dark:opacity-60"])},o(p.ucf(t.status)),3)]),l("td",se,o(e.convertAmount(t.paid_amount)),1),l("td",ie,o(t.date_time),1)]))),128)):(c(),x(C,{key:1,asShow:"tr"}))]),_:1}),l("div",ne,[r(U,{class:"mt-6",links:s.transactions.links},null,8,["links"])])]),r(L,{show:d.visible,onClose:e.closeModal},{title:n(()=>[u(o(e.__("Export Data")),1)]),content:n(()=>[l("div",de,[l("div",ue,[w(l("input",{value:"xlsx",id:"excel","onUpdate:modelValue":a[4]||(a[4]=t=>d.export_data.type=t),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:text-gray-400 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[T,d.export_data.type]]),r(h,{for:"excel",class:"py-3 ml-2 cursor-pointer w-full text-sm font-medium text-gray-900 dark:text-gray-300",value:"Excel",required:!1})]),l("label",pe,[w(l("input",{value:"pdf",id:"pdf","onUpdate:modelValue":a[5]||(a[5]=t=>d.export_data.type=t),type:"radio",name:"export_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[T,d.export_data.type]]),r(h,{for:"pdf",class:"py-3 ml-2 w-full text-sm font-medium cursor-pointer text-gray-900 dark:text-gray-300",value:"PDF",required:!1})])])]),footer:n(()=>[r(b,{onClick:a[6]||(a[6]=t=>p.exportSubmit()),loading:d.loading,type:"button",theme:"primary",class:"mr-2",id:"testExport"},{default:n(()=>[u(o(e.__("Export")),1)]),_:1},8,["loading"]),r(b,{loading:!1,onClick:a[7]||(a[7]=t=>d.visible=!1),type:"button",theme:"outline-danger"},{default:n(()=>[u(o(e.__("Cancel")),1)]),_:1})]),_:1},8,["show","onClose"])]),_:1},8,["title"])}const Se=M(G,[["render",ce]]);export{Se as default};
